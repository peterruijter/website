!function(){var S,n,o,a,l,t=window.tentacles.installUri?window.tentacles.installUri+"/tentacles.js?":"https://tentacles.smartocto.com/ten/tentacles.js?",x=["h1","h2","h3","h4","h5","h6","p","span","strong","cite"],C=(window.tentaclesProcessedABTitles=!1,window.tentacles.apiToken),G=(C||""===C||w.error('TENTACLES: No API key given. Please add a valid apiToken above this script call: window.tentacles = { apiToken: "09876543edfghy7"};'),null),Z=null,K=null,g=null,Q=null,s=null,c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,a,o,r,l,i="",s=0;for(e=c._utf8_encode(e);s<e.length;)a=(t=e.charCodeAt(s++))>>2,o=(3&t)<<4|(t=e.charCodeAt(s++))>>4,r=(15&t)<<2|(n=e.charCodeAt(s++))>>6,l=63&n,isNaN(t)?r=l=64:isNaN(n)&&(l=64),i=i+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(l);return i},decode:function(e){var t,n,a,o,r,l,i="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)a=this._keyStr.indexOf(e.charAt(s++)),t=(15&(o=this._keyStr.indexOf(e.charAt(s++))))<<4|(r=this._keyStr.indexOf(e.charAt(s++)))>>2,n=(3&r)<<6|(l=this._keyStr.indexOf(e.charAt(s++))),i+=String.fromCharCode(a<<2|o>>4),64!==r&&(i+=String.fromCharCode(t)),64!==l&&(i+=String.fromCharCode(n));return i=c._utf8_decode(i)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):t=127<a&&a<2048?(t+=String.fromCharCode(a>>6|192))+String.fromCharCode(63&a|128):(t=(t+=String.fromCharCode(a>>12|224))+String.fromCharCode(a>>6&63|128))+String.fromCharCode(63&a|128)}return t},_utf8_decode:function(e){var t,n="",a=0;for(c1=c2=0;a<e.length;)(t=e.charCodeAt(a))<128?(n+=String.fromCharCode(t),a++):191<t&&t<224?(c2=e.charCodeAt(a+1),n+=String.fromCharCode((31&t)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),n+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),a+=3);return n}},I=(S=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},l={compressToBase64:function(e){if(null==e)return"";var t=l._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""===t?null:l._decompress(t.length,32,function(e){return r(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":l._compress(e,15,function(e){return S(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""===t?null:l._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=l.compress(e),n=new Uint8Array(2*t.length),a=0,o=t.length;a<o;a++){var r=t.charCodeAt(a);n[2*a]=r>>>8,n[2*a+1]=r%256}return n},decompressFromUint8Array:function(e){if(null==e)return l.decompress(e);for(var t=new Array(e.length/2),n=0,a=t.length;n<a;n++)t[n]=256*e[2*n]+e[2*n+1];var o=[];return t.forEach(function(e){o.push(S(e))}),l.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":l._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""===t?null:(t=t.replace(/ /g,"+"),l._decompress(t.length,32,function(e){return r(o,t.charAt(e))}))},compress:function(e){return l._compress(e,16,function(e){return S(e)})},_compress:function(e,t,n){if(null==e)return"";for(var a,o,r,l,i={},s={},c="",d=2,g=3,u=2,m=[],f=0,h=0,p=0;p<e.length;p+=1)if(r=e.charAt(p),Object.prototype.hasOwnProperty.call(i,r)||(i[r]=g++,s[r]=!0),l=c+r,Object.prototype.hasOwnProperty.call(i,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<u;a++)f<<=1,h===t-1?(h=0,m.push(n(f)),f=0):h++;for(o=c.charCodeAt(0),a=0;a<8;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1}else{for(o=1,a=0;a<u;a++)f=f<<1|o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o=0;for(o=c.charCodeAt(0),a=0;a<16;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1}0===--d&&(d=Math.pow(2,u),u++),delete s[c]}else for(o=i[c],a=0;a<u;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1;0===--d&&(d=Math.pow(2,u),u++),i[l]=g++,c=String(r)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<u;a++)f<<=1,h===t-1?(h=0,m.push(n(f)),f=0):h++;for(o=c.charCodeAt(0),a=0;a<8;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1}else{for(o=1,a=0;a<u;a++)f=f<<1|o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o=0;for(o=c.charCodeAt(0),a=0;a<16;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1}0===--d&&(d=Math.pow(2,u),u++),delete s[c]}else for(o=i[c],a=0;a<u;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1;0===--d&&(d=Math.pow(2,u),u++)}for(o=2,a=0;a<u;a++)f=f<<1|1&o,h===t-1?(h=0,m.push(n(f)),f=0):h++,o>>=1;for(;;){if(f<<=1,h===t-1){m.push(n(f));break}h++}return m.join("")},decompress:function(t){return null==t?"":""===t?null:l._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){for(var a,o,r,l,i,s,c=[],d=4,g=4,u=3,m="",f=[],h={val:n(0),position:t,index:1},p=0;p<3;p+=1)c[p]=p;for(o=0,l=Math.pow(2,2),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;s=S(o);break;case 1:for(o=0,l=Math.pow(2,16),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;s=S(o);break;case 2:return""}for(a=c[3]=s,f.push(s);;){if(h.index>e)return"";for(o=0,l=Math.pow(2,u),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;switch(s=o){case 0:for(o=0,l=Math.pow(2,8),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;c[g++]=S(o),s=g-1,d--;break;case 1:for(o=0,l=Math.pow(2,16),i=1;i!==l;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index++)),o|=(0<r?1:0)*i,i<<=1;c[g++]=S(o),s=g-1,d--;break;case 2:return f.join("")}if(0===d&&(d=Math.pow(2,u),u++),c[s])m=c[s];else{if(s!==g)return null;m=a+a.charAt(0)}f.push(m),c[g++]=a+m.charAt(0),a=m,0===--d&&(d=Math.pow(2,u),u++)}}});function r(e,t){if(!a[e]){a[e]={};for(var n=0;n<e.length;n++)a[e][e.charAt(n)]=n}return a[e][t]}"function"==typeof define&&define.amd?define("LZString",function(){return I}):"undefined"!=typeof module&&null!=module&&(module.exports=I),Math.round10||(Math.round10=function(e,t){return n="round",e=e,void 0!==(t=t)&&0!=+t?(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[n](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t)))):Math[n](e);var n});var ee,y,T,b,A,O,N,u,e,k=3e4,te="active",ne="completed",m="https://api-staging.smartocto.com/api/brands/tentacles",P="t"===localStorage.getItem("tentaclesEnabled"),E=JSON.parse(localStorage.getItem("tentacles_"+C+"_urls")),w=window.console,D=function(){},J=function(){},f=(localStorage.removeItem("tentacles_user_id"),localStorage.removeItem("tentacle_pagedata"),localStorage.removeItem("tentacles_pagedata"),localStorage.removeItem("tentacles_domainregex"),localStorage.removeItem("tentacles_useDivolte"),localStorage.removeItem("tentacles_reading_time"),localStorage.removeItem("tentacles_basePaths"),localStorage.removeItem("tentacles_urls"),localStorage.removeItem("tentacles_data_layer_config"),localStorage.removeItem("tentacles_page_urls"),localStorage.removeItem("tentacles_excludeclasses"),localStorage.removeItem("tentacles_domainsearchpath"),localStorage.removeItem("tentacles_urls_time"),localStorage.removeItem("tentacles_useIngestionApi"),localStorage.removeItem("tentacles_activefilter"),localStorage.removeItem("tentacles_dockcache_time"),localStorage.removeItem("tentacles_domainvpath"),localStorage.removeItem("tentacles_xPathIds"),localStorage.removeItem("tentacles_currentHostname"),localStorage.removeItem("tentacles_replacementElements"),localStorage.removeItem("tentacles_useDivInReplacement"),f||{}),h=!0,p=!0,R=[],ae=[],oe="",L=!1,M="",U="",B="",j=[],X=!1,F=[],Y=!1,q=null,H=!1,V=!1,W=!1;function re(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return e[a];return null}function le(e){for(var t=function(e){var t,n,a,o=0,r=[];if(""===e.trim())return[];if(/[^0-9a-fA-F]/.test(e))return!1;for(n=(t=e.match(/.{1,2}/g)).length,a=0;a<n;++a)""!==t[a].trim()&&(r[o++]=parseInt(t[a],16));return r}(e),n="",a=0;a<t.length;a+=2)n+=String.fromCharCode(t[a]|t[a+1]<<8);return n}function ie(e){for(var t=[],n=0;n<e.length;n++){var a=e.charCodeAt(n);t.push(255&a),t.push(a>>8&255)}var o,r,l,i=t,s="";if(!function(e){return"object"==typeof e&&e instanceof Array}(i))return!1;for(r=i.length,o=0;o<r;++o)i[o]<0&&(i[o]=i[o]+256),void 0===i[o]&&(alert("Boom "+o),i[o]=0),1===(l=i[o].toString(16)).length&&(l="0"+l),s+=l;return s.trim()}function se(){return new Promise(function(t,n){try{var e=localStorage.getItem("tentacles_"+C+"_basePaths");null!==e?-1===JSON.parse(e).indexOf(window.location.pathname)?t(!0):t(!1):z().then(function(e){t(!!e)})}catch(e){n(e)}})}function z(g){return new Promise(function(t,n){try{var e,a,o=localStorage.getItem("tentacles_"+C+"_domainregex"),r=null!==(r=localStorage.getItem("tentacles_"+C+"_domainregex_on_params"))&&"true"===r,l=localStorage.getItem("tentacles_"+C+"_domainvpath"),i=new RegExp(l,"g"),s=localStorage.getItem("tentacles_"+C+"_basePaths"),c=r?window.location.href:window.location.pathname,d=!1;g&&(c=g),l&&(d=i.test(c)),o?(e=new RegExp(o,"g").exec(c))&&2<=e.length?(e.splice(0,1),a=e.filter(function(e){if(e)return e}).map(function(e){return e.toString()})[0],s?pe("feed"+a).then(function(e){e=e.substring(0,20);t(d?"v"+e:e)}):t(d?"v"+a:a)):t():s?pe("feed"+c).then(function(e){e=e.substring(0,20);t(d?"v"+e:e)}):t()}catch(e){n(e)}})}function v(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}function ce(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLocaleLowerCase()).replace(/\+/g,"")).replace(/\*/g,"")).replace(/\-/g,"")).replace(/\=/g,"")).replace(/&&/g,"")).replace(/||/g,"")).replace(/>/g,"")).replace(/</g,"")).replace(/!/g,"")).replace(/\(/g,"")).replace(/\)/g,"")).replace(/{/g,"")).replace(/}/g,"")).replace(/\[/g,"")).replace(/]/g,"")).replace(/^/g,"")).replace(/"/g,"")).replace(/~/g,"")).replace(/\?/g,"")).replace(/:/g,"")).replace(/\\/g,"")).replace(/\//g,"")}function de(e){var t,n={};if(null===e||!Array.isArray(e))return null;for(t in e){var a,o=e[t];for(a in o)if(o[a]&&o[a].mapping){var r=o[a].mapping;if(r)for(var l=0;l<r.length;l++){var i=r[l],s=i.inputField,c="["!==s.substr(0,1)?".":"",c="["!==s.substr(0,1)?s:a+c+s,s=i.outputField;s in n&&n[s]||(n[s]=function(e){try{var t=null;a=(a=e).replace(/\[(\d+)]/g,".$1"),o=window[a.substr(0,a.indexOf("."))],a=a.substr(a.indexOf(".")+1);var n=String(a).split(".").reduce(function(e,t){try{e=e[t]}catch(e){return null}return e},o);return t=n?"string"==typeof n||n instanceof String?n.split("!").join("&#33;"):n:t}catch(e){w.error(e)}var a,o}(c))}}}return n}function ge(e,a,t){var o,r,l;e&&2<e.length&&(null!==(o=de(e=JSON.parse(e)))&&null!==a&&(r=function(e){try{var t=c.encode(JSON.stringify(e)),n=t.length,a=0;if(n<16)return t;for(var o=0;o<n;o++)a+=t.charCodeAt(o);return ce(c.encode(t.substring(0,8)+"-"+t.substring(n/2-4,n/2+4)+"-"+t.substr(n-8,n)+"-"+a))}catch(e){w.error(e)}}(o),l=ce(c.encode(a+"_"+t)),o.hash=r,o.brandId=a,o.documentId=l,o.channel=i(),s=setTimeout(function(){var t,n;P||(t=function(){V&&ingestion.signal("dataLayer",o),clearTimeout(s)},(n=v("get","https://api.smartocto.com/api/brands/"+a+"/dataLayer/"+l+"_"+r))&&(n.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(e=JSON.parse(n.responseText))&&!1===e.match&&t()},n.send()))},2e4)))}function ue(){function o(e){return e.replace(/[^\w\s]/gi,"")}function t(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])<0)return;return 1}var n,e=[],a=(X=null!==(X=localStorage.getItem("tentacles_"+C+"_useDivInReplacement"))&&"true"===X,localStorage.getItem("tentacles_"+C+"_basePaths")),r=JSON.parse(localStorage.getItem("tentacles_"+C+"_urls"));if(r&&0<r.length)for(var l=0;l<r.length;l++){var i,s=r[l];if(!(0<=e.indexOf(s.relationId))){e.push(s.relationId);for(var c=s.relationId,d=(s.hasOwnProperty("type")&&"video"===s.type&&(c=s.relationId.substring(1)),i=a&&0<a.length?document.querySelectorAll('a[tentacle-id^="'+c+'"]'):document.querySelectorAll('a[href*="'+c+'"]'),s.oldTitle.split("$$")),g=s.newTitle.split("$$"),u=0;u<i.length;u++){var m=i[u];if(ae.push(c),"1"!==m.getAttribute("data-tentacles-r")&&!function(e,t){return e&&Array.isArray(e)&&0<e.length&&t&&Array.isArray(t)&&0<t.length&&0<e.filter(function(e){return-1<t.indexOf(e)}).length}(j,Array.from(m.classList))){for(let e=0;e<d.length;e++){var f,h,p,S,v=g[e]||"",I=[],w=function(e){for(var t,n=/\b\w+\b/g,a=[];(t=n.exec(e))&&a.push(o(t[0])););return a}(d[e]);if("a"===m.tagName.toLowerCase()&&1===m.childNodes.length&&"#text"===m.childNodes[0].nodeName&&t(w,o(m.innerText))&&m.innerText.length<=d[e].length+4)I.push([m.children.length,m]);else{X&&(n=void 0,(null===(n=localStorage.getItem("tentacles_"+C+"_replacementElements"))||"undefined"===n?[]:JSON.parse(n)).map(function(e){-1===x.indexOf(e)&&x.push(e)}));for(var y=0;y<x.length;y++)for(f=x[y],h=m.querySelectorAll(f),p=0;p<h.length;p++)(S=h[p])&&t(w,o(S.innerText))&&S.innerText.length<=d[e].length+4&&function(e){if(!(e instanceof Element))return!1;var t=getComputedStyle(e);return"none"!==t.display&&("visible"===t.visibility&&(!(t.opacity<.1)&&e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width!==0))}(S)&&I.push([S.children.length,S])}I.length&&(I.sort(function(e,t){return t[0]-e[0]}),(S=I.pop()[1]).innerText=v)}m.setAttribute("data-tentacles-r","1")}}}}window.tentaclesProcessedABTitles=!0}function d(e,t){e.url||w.error("oops no scriptURL defined to load");var n=document.createElement("script"),a=(n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t&&t())}:t&&(n.onload=function(){t()}),e.defer&&(n.defer=!0),e.async&&(n.async="async"),n.src=e.url,document.getElementsByTagName("body")[0]);"body-top"===e.location&&a?a.insertBefore(n,a.firstChild):a?a.appendChild(n):addEventListener("DOMContentLoaded",function(){document.getElementsByTagName("body")[0].appendChild(n)})}function me(e){var t,n;return t=window.navigator.userAgent,(0<(n=t.indexOf("MSIE "))?parseInt(t.substring(n+5,t.indexOf(".",n)),10):0<t.indexOf("Trident/")?(n=t.indexOf("rv:"),parseInt(t.substring(n+3,t.indexOf(".",n)),10)):0<(n=t.indexOf("Edge/"))&&parseInt(t.substring(n+5,t.indexOf(".",n)),10))?("object"!=typeof window.wgxpath&&d({url:WGXPATH_URL,defer:!0,async:!1},function(){wgxpath.install()}),window.document.createExpression(e).evaluate(window.document,XPathResult.STRING_TYPE)):(new XPathEvaluator).createExpression(e).evaluate(document,XPathResult.FIRST_ORDERED_NODE_TYPE).singleNodeValue}function fe(){return window.crypto||window.msCrypto}function he(e){for(var t="",n=new DataView(e),a=0;a<n.byteLength;a+=4){var o="00000000";t+=(o+n.getUint32(a).toString(16)).slice(-o.length)}return t}function pe(e){try{var t=(new TextEncoder).encode(e);return fe().subtle.digest("SHA-256",t).then(he)}catch(e){J(e)}}function _e(){return new Promise(function(I,t){try{clearInterval(tentacle_timer_apply);var w,e=localStorage.getItem("tentacles_"+C+"_urls_time"),n=localStorage.getItem("tentacles_"+C+"_dockcache_time"),a=new Date;null!==e&&a<new Date(e)&&(R=JSON.parse(localStorage.getItem("tentacles_"+C+"_urls")),h=!1),P&&null!==n&&a<new Date(n)&&(p=!1),h||P&&p?(w=v("get",m+"?i="+C+(P?"&dock=true":"")))&&(w.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(w.responseText);if(R=e.headerTests,oe=e.domainSettings.regex,L="true"===String(e.domainSettings.regex_on_params).toLocaleLowerCase(),B=e.domainSettings.vPath,ee=e.domainSettings.searchPath,y=e.domainSettings.mapping,T=e.domainSettings.brand,M=e.domainSettings.mainContent,U=e.domainSettings.excludeContent,Y=e.domainSettings.xPathIds,j=e.domainSettings.excludeClasses,X=e.domainSettings.useDivInReplacement,F=e.domainSettings.replacementElements,q=e.domainSettings.dataLayerConfig,H=e.domainSettings.collectReadingtime,b=e.domainSettings.basePaths,N=e.domainSettings.ignorePaths,A=e.domainSettings.customCss,W=e.domainSettings.doNotTrackUserId,O=e.domainSettings.urls,V="true"===String(e.domainSettings.useIngestionApi).toLocaleLowerCase(),null===localStorage.getItem("tentacles_"+C+"_urls")){for(var t=!(E=[]),n=0,a=R.length;n<a;n++)if(0!==R[n].testData.length){var o,t=!1,r={};if(R[n].status===te)r.chosen=R[n].chosen,t=!0;else if(R[n].status===ne)for(var l=0,i=R[n].testData.length;l<i;l++)if(R[n].testData[l].won){t=!0,r.chosen=R[n].testData[l].id;break}r.id=R[n].id,r.relationId=R[n].relationId,r.status=R[n].status,r.oldTitle=R[n].title,r.type=R[n].hasOwnProperty("type")?R[n].type:"story",!1===t?r.newTitle=r.oldTitle:(o=re(R[n].testData,"id",r.chosen),r.newTitle=o.title),0===r.chosen&&t||E.push(r)}localStorage.setItem("tentacles_"+C+"_domainsearchpath",ee),localStorage.setItem("tentacles_"+C+"_urls",JSON.stringify(E)),localStorage.setItem("tentacles_"+C+"_domainregex",oe),localStorage.setItem("tentacles_"+C+"_brand",T),localStorage.setItem("tentacles_"+C+"_main_content",M),localStorage.setItem("tentacles_"+C+"_exclude_content",U),L?localStorage.setItem("tentacles_"+C+"_domainregex_on_params",L):localStorage.removeItem("tentacles_"+C+"_domainregex_on_params"),j?localStorage.setItem("tentacles_"+C+"_excludeclasses",JSON.stringify(j)):localStorage.removeItem("tentacles_"+C+"_excludeclasses"),F?localStorage.setItem("tentacles_"+C+"_replacementElements",JSON.stringify(F)):localStorage.removeItem("tentacles_"+C+"_replacementElements"),B?localStorage.setItem("tentacles_"+C+"_domainvpath",B):localStorage.removeItem("tentacles_"+C+"_domainvpath"),y?localStorage.setItem("tentacles_"+C+"_pagemapping",JSON.stringify(y)):localStorage.removeItem("tentacles_"+C+"_pagemapping"),Y?localStorage.setItem("tentacles_"+C+"_xPathIds",Y):localStorage.removeItem("tentacles_"+C+"_xPathIds"),X?localStorage.setItem("tentacles_"+C+"_useDivInReplacement",JSON.stringify(X)):localStorage.removeItem("tentacles_"+C+"_useDivInReplacement"),q?localStorage.setItem("tentacles_"+C+"_data_layer_config",JSON.stringify(q)):localStorage.removeItem("tentacles_"+C+"_data_layer_config"),H?localStorage.setItem("tentacles_"+C+"_reading_time",JSON.stringify(H)):localStorage.removeItem("tentacles_"+C+"_reading_time"),b?localStorage.setItem("tentacles_"+C+"_basePaths",JSON.stringify(b)):localStorage.removeItem("tentacles_"+C+"_basePaths"),N?localStorage.setItem("tentacles_"+C+"_ignorePaths",JSON.stringify(N)):localStorage.removeItem("tentacles_"+C+"_ignorePaths"),W?localStorage.setItem("tentacles_"+C+"_doNotTrackUserId",W):localStorage.removeItem("tentacles_"+C+"_doNotTrackUserId"),V?localStorage.setItem("tentacles_"+C+"_useIngestionApi",V):localStorage.removeItem("tentacles_"+C+"_useIngestionApi"),O&&localStorage.setItem("tentacles_"+C+"_page_urls",JSON.stringify(O)),A&&localStorage.setItem("tentacles_"+C+"_customCss",A),localStorage.setItem("tentacles_"+C+"_urls_time",""+new Date((new Date).getTime()+k)),P&&localStorage.setItem("tentacles_"+C+"_dockcache_time",""+new Date((new Date).getTime()+k)),I()}else{var s=JSON.parse(localStorage.getItem("tentacles_"+C+"_urls")),c=!1;if(0===R.length)localStorage.removeItem("tentacles_"+C+"_urls");else{for(var d,g=R.map(function(e){return e.id}),u=0;u<R.length;u++)if(0!==R[u].testData.length){for(var c=!1,m=0;m<s.length;m++)if(s[m].id===R[u].id){for(var f=0,h=R[u].testData.length;f<h;f++)if(R[u].testData[f].won){s[m].chosen=R[u].testData[f].id;break}s[m].status=R[u].status,(p=re(R[u].testData,"id",R[u].chosen))&&(s[m].newTitle=p.title,s[m].type=R[u].type,s[m].chosen=R[u].chosen),c=!0;break}if(!1===c){var p,S={};if(R[u].status===te)S.chosen=R[u].chosen,c=!0;else if(R[u].status===ne)for(var m=0,v=R[u].testData.length;m<v;m++)if(R[u].testData[m].won){c=!0,S.chosen=R[u].testData[m].id;break}S.id=R[u].id,S.relationId=R[u].relationId,S.status=R[u].status,S.oldTitle=R[u].title,S.type=R[u].hasOwnProperty("type")?R[u].type:"story",!1===c?S.newTitle=S.oldTitle:(p=re(R[u].testData,"id",S.chosen),S.newTitle=p.title),0===S.chosen&&c||s.push(S)}}0<R.length&&(d=s.filter(function(e){if(-1!==g.indexOf(e.id))return!0})),localStorage.setItem("tentacles_"+C+"_urls",JSON.stringify(d)),E=d}localStorage.setItem("tentacles_"+C+"_domainsearchpath",ee),localStorage.setItem("tentacles_"+C+"_domainregex",oe),localStorage.setItem("tentacles_"+C+"_brand",T),M?localStorage.setItem("tentacles_"+C+"_main_content",M):localStorage.removeItem("tentacles_"+C+"_main_content"),U?localStorage.setItem("tentacles_"+C+"_exclude_content",U):localStorage.removeItem("tentacles_"+C+"_exclude_content"),L?localStorage.setItem("tentacles_"+C+"_domainregex_on_params",JSON.stringify(L)):localStorage.removeItem("tentacles_"+C+"_domainregex_on_params"),j?localStorage.setItem("tentacles_"+C+"_excludeclasses",JSON.stringify(j)):localStorage.removeItem("tentacles_"+C+"_excludeclasses"),F?localStorage.setItem("tentacles_"+C+"_replacementElements",JSON.stringify(F)):localStorage.removeItem("tentacles_"+C+"_replacementElements"),B?localStorage.setItem("tentacles_"+C+"_domainvpath",B):localStorage.removeItem("tentacles_"+C+"_domainvpath"),y?localStorage.setItem("tentacles_"+C+"_pagemapping",JSON.stringify(y)):localStorage.removeItem("tentacles_"+C+"_pagemapping"),Y?localStorage.setItem("tentacles_"+C+"_xPathIds",Y):localStorage.removeItem("tentacles_"+C+"_xPathIds"),X?localStorage.setItem("tentacles_"+C+"_useDivInReplacement",JSON.stringify(X)):localStorage.removeItem("tentacles_"+C+"_useDivInReplacement"),q?localStorage.setItem("tentacles_"+C+"_data_layer_config",JSON.stringify(q)):localStorage.removeItem("tentacles_"+C+"_data_layer_config"),H?localStorage.setItem("tentacles_"+C+"_reading_time",JSON.stringify(H)):localStorage.removeItem("tentacles_"+C+"_reading_time"),b?localStorage.setItem("tentacles_"+C+"_basePaths",JSON.stringify(b)):localStorage.removeItem("tentacles_"+C+"_basePaths"),N?localStorage.setItem("tentacles_"+C+"_ignorePaths",JSON.stringify(N)):localStorage.removeItem("tentacles_"+C+"_ignorePaths"),A?localStorage.setItem("tentacles_"+C+"_customCss",A):localStorage.removeItem("tentacles_"+C+"_customCss"),O?localStorage.setItem("tentacles_"+C+"_page_urls",JSON.stringify(O)):localStorage.removeItem("tentacles_"+C+"_page_urls"),W?localStorage.setItem("tentacles_"+C+"_doNotTrackUserId",W):localStorage.removeItem("tentacles_"+C+"_doNotTrackUserId"),V?localStorage.setItem("tentacles_"+C+"_useIngestionApi",V):localStorage.removeItem("tentacles_"+C+"_useIngestionApi"),localStorage.setItem("tentacles_"+C+"_urls_time",""+new Date((new Date).getTime()+k)),P&&localStorage.setItem("tentacles_"+C+"_dockcache_time",""+new Date((new Date).getTime()+k)),I()}}},w.send()):I()}catch(e){J(e),t(e)}})}function i(){return window&&window.tentacles&&window.tentacles.channel?window.tentacles.channel:"web"}function Se(){clearInterval(tentacle_timer_apply);function s(e){if(!(5e3<Date.now()-c)){var t=localStorage.getItem("tentacles_"+C+"_brand"),n=localStorage.getItem("tentacles_"+C+"_main_content"),a=localStorage.getItem("tentacles_"+C+"_exclude_content"),o="true"===String(localStorage.getItem("tentacles_"+C+"_reading_time"))||"false"!==String(localStorage.getItem("tentacles_"+C+"_reading_time"))&&void 0;if(window.ingestion&&t&&e){if(e&&o){o={brandId:t,relationId:e,mainContent:n,excludeContent:a};try{var r=V&&void 0!==window.ingestion?window.ingestion:void 0,l=o,i=r;try{P||("function"==typeof trackReadingTime?(f=f&&{},trackReadingTime(l,i)):d({url:window.tentacles.installUri?window.tentacles.installUri+"/reading-time.js":"https://tentacles.smartocto.com/ten/reading-time.js",defer:!0,async:!0},function(){trackReadingTime(l,i)}))}catch(e){w.error(e)}}catch(e){w.error(e)}}}else g=setTimeout(function(){s(e)},500)}}var e,c=Date.now();function t(){return new Promise(function(o,e){var r=document.body.getElementsByTagName("a"),l=0;for(var t=[],i=[],n=0;n<r.length;n++)t.push(function(n){return new Promise(function(t,e){z(n).then(function(e){t({relationId:e,path:n})})})}(r[n].getAttribute("href")));Promise.all(t).then(function(e){i=e}).catch(function(e){w.error(e)}).finally(function(){for(var e=0;e<r.length;e++){var t=r[e].getAttribute("href"),n=r[e],a=i.filter(function(e){return e.path===t});0<a.length&&a[0].relationId&&n.setAttribute("tentacle-id",a[0].relationId+"-"+l.toString(16)),l++}o(!0)})})}function n(){var d,g,f={},u=localStorage.getItem("tentacles_"+C+"_pagemapping"),h=localStorage.getItem("tentacles_"+C+"_domainsearchpath"),p="true"===localStorage.getItem("tentacles_"+C+"_xPathIds"),m=localStorage.getItem("tentacles_"+C+"_domainregex"),S=localStorage.getItem("tentacles_"+C+"_basePaths");function v(e,t,n){var a=e.attributes.href.nodeValue,o=e.getAttribute("tentacle-id"),r=function(e,t){if(E)for(var n=0;n<E.length;n++){var a=!1,o=(B&&(a=new RegExp(B,"g").test(e)),E[n].relationId);if(a&&(o=E[n].relationId.substring(1)),0<=e.indexOf(o)||t===E[n].relationId)return{relationId:E[n].relationId,id:E[n].id,chosenId:E[n].chosen,status:E[n].status,type:E[n].type}}}(a,o?o.split("-")[0]:void 0),r=r&&r.status===te?(c=r.id,r.chosenId):c=-1,l={brandId:T,linkPath:a,linkXPath:function e(t,n){if(""!==t.id&&n)return"id('"+t.id+"')";if(t===document.body)return t.tagName.toLowerCase();for(var a=0,o=t.parentNode?t.parentNode.childNodes:[],r=0;r<o.length;r++){var l=o[r];if(l===t)return e(t.parentNode,n)+"/"+t.tagName.toLowerCase()+"["+(a+1)+"]";1===l.nodeType&&l.tagName===t.tagName&&a++}}(e,p),linkSourcePath:location.pathname,headerTestId:c,headerTestChosenId:r},a={top:0,left:0};if(h){var i,s,c=h.split("|");if(2===c.length)try{"class"===c[0]?1<=(i=document.getElementsByClassName(c[1])).length&&(a=i[0].getBoundingClientRect()):a=document.getElementById(c[1]).getBoundingClientRect()}catch(e){w.error(e)}try{var d=e.getBoundingClientRect(),g=d.top-a.top,u=d.left-a.left,m=(n&&(u=d.left-n.left),{linkX1:Math.round10(u,1),linkX2:Math.round10(u+d.width,1),linkY1:Math.round10(g,1),linkY2:Math.round10(g+d.height,1),linkHeight:Math.round10(d.height,1),linkWidth:Math.round10(d.width,1)});m.linkPosition=void 0===t?location.pathname+"_"+m.linkX1+"_"+m.linkY1+"_"+m.linkX2+"_"+m.linkY2:location.pathname+"_"+m.linkX1+"_"+m.linkY1+"_"+m.linkX2+"_"+m.linkY2+"_"+t}catch(e){w.error(e)}for(s in m)l[s]=m[s]}else w.error("NO domain_searchpath!");r=I.compressToUTF16(JSON.stringify(l));f[o]=ie(r),window.tentacles_pageData=f,e.addEventListener("click",function(e){var t=window.tentacles_pageData;D("getPagedata",t),D("tentacleId",o),D("getPagedata[tentacleId]",t[o]),localStorage.setItem("tentacles_linkClick",t[o])})}T=localStorage.getItem("tentacles_"+C+"_brand"),se().then(function(e){if(e)w.log("Tentacles is initiating Article Page"),z(window.location.href).then(function(e){var t=localStorage.getItem("tentacles_linkClick");if(e&&t)try{var n=le(t),n=I.decompressFromUTF16(n),a=JSON.parse(n);function o(e,t){V&&void 0!==window.ingestion?t&&!P?V&&ingestion.signal(e,t):w.warn("Tentacles desktop is activated so data is send."):G=setTimeout(o,250,"linkClick",t)}a.relationId=e,localStorage.removeItem("tentacles_linkClick"),Z=setTimeout(o,1e3,"linkClick",a),K=setTimeout(o,1e4,"loyaltyClick",a)}catch(e){J(e),localStorage.removeItem("tentacles_linkClick")}});else{w.log("Tentacles is initiating Index Page"),m||S||w.error("Domain's regex and optional basePaths are missing");var t,n=RegExp(m);if(u){if(g=JSON.parse(u))for(var a in d=g["*"],d=g[window.location.pathname]?g[window.location.pathname]:d)if(d.hasOwnProperty(a)){var o=me(d[a]);if(o)for(var r=(r=Array.from(o.getElementsByTagName("a"))).filter(function(e){return e.href&&n.test(e.href)}),l=o.getBoundingClientRect(),i=0;i<r.length;i++)v(r[i],a,l)}}else for(var s=(s=Array.from(document.body.getElementsByTagName("a"))).filter(function(e){return e.href&&n.test(e.href)}),c=0;c<s.length;c++)v(s[c]);try{E&&(t=E.filter(function(e){var t=e.hasOwnProperty("type")&&"video"===e.type?e.relationId.substring(1):e.relationId;return"active"===e.status&&-1<ae.indexOf(t)}).map(function(e){return{headerTestId:e.id,headerTestChosenId:e.chosen}}),Q=setTimeout(function e(t,n,a){V&&void 0!==window.ingestion?0<a.length&&!P&&(n={brandId:n,impressions:JSON.stringify(a)},V&&ingestion.signal(t,n)):Q=setTimeout(e,250,"impressions",T,a)},1e3,"impressions",T,t)),w.log("*")}catch(e){w.error(e),J(e)}}})}P||(e={},void 0===window.ingestion?d({url:window.tentacles.installUri?window.tentacles.installUri+"/ingestion.js":"https://tentacles.smartocto.com/ten/ingestion.js",defer:!0,async:!0},function(){void 0===window.ingestion&&window.module&&window.module.exports&&(window.ingestion=window.module.exports),e.channel=i(),window.ingestion.signal("pageView",e),w.log("IngestionApi loaded...")}):(e.channel=i(),window.ingestion.signal("pageView",e))),_e().then(function(){D("populateCaching ended"),V=V||"true"===localStorage.getItem("tentacles_"+C+"_useIngestionApi"),P||(V||w.error("Tentacles: No data can be collected for smartocto's Tentacles, please check configuration values"),se().then(function(e){e?z(window.location.href).then(function(e){var t;e&&(window.tentaclesProcessedABTitles=!0,document.body?n():window.addEventListener("DOMContentLoaded",function(){n()}),q=localStorage.getItem("tentacles_"+C+"_data_layer_config"),(t=localStorage.getItem("tentacles_"+C+"_brand"))&&q&&(D("call sendDataLayer"),ge(q,t,e)),s(e))}):t().then(function(e){e&&(ue(),document.body?n():window.addEventListener("DOMContentLoaded",function(){n()}))})})),w.log("smartocto's Tentacles loaded...")}).catch(function(e){J("error in populateCaching",e)})}D("Initializing Tentacles"),window.tentacles&&(window.tentacles.onVideoPlay=function(t){if(t&&t.videoId&&t.title)try{t.brandId=localStorage.getItem("tentacles_"+C+"_brand"),t.channel=i(),z(window.location.href).then(function(e){t.relationId=e}).finally(function(){window.ingestion.signal("videoPlay",t)})}catch(e){J("Error on video play event",e)}else w.log("Invalid video play request.")}),window.tentaclesExecuted?D("%cTentacles: Skipping execution!","background: #EE191E; color: white; padding: 2px 4px; border-radius: 4px 0px 0px 4px;"):(u=!1,(u=(N=localStorage.getItem("tentacles_"+C+"_ignorePaths"))&&0<=JSON.parse(N).indexOf(window.location.pathname)?!0:u)?D("%cTentacles: Skipping execution on "+window.location.pathname+"!","background: #EE191E; color: white; padding: 2px 4px; border-radius: 4px 0px 0px 4px;"):P?function(){try{return window.self!==window.top}catch(e){return 1}}()||(tentacle_timer_apply=setInterval(function(){C&&!e&&(_e().then(function(){d({location:"body-top",url:t})}).catch(function(e){J(e)}),e=!0)},100)):tentacle_timer_apply=setInterval(function(){C&&!e&&(Se(),e=!0)},100)),window.addEventListener("message",function(e){"activateTentacles"!==e.data&&"stopTentacles"!==e.data||(clearTimeout(Z),clearTimeout(G),clearTimeout(K),clearTimeout(g),clearTimeout(Q),clearTimeout(s),localStorage.getItem("tentacles_"+C+"_reading_time")&&(clearInterval(window.tentacles_at_timer_sample),clearInterval(window.tentacles_at_timer_send_beat)),"activateTentacles"!==e.data||P||Se())},!1),window.tentaclesExecuted=!0}("undefined"==typeof t&&(t={}));
