!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=88)}({0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return v})),n.d(t,"m",(function(){return p})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return y}));var r='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M7.179 0v11.976L2.465 6.84 1 8.204 8.177 16l7.18-7.796-1.465-1.364-4.712 5.133V0z" fill-rule="evenodd"/>\n  </svg>\n',i='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M7.796 1L0 8.178l7.796 7.18 1.364-1.465L4.028 9.18H16v-2H4.024L9.16 2.465z" fill-rule="evenodd"/>\n  </svg>\n',a='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.204 1L6.84 2.465l5.131 4.713H0v2h11.976L6.84 13.893l1.364 1.465L16 8.18z" fill-rule="evenodd"/>\n  </svg>\n',s='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.179 0L1 7.796 2.465 9.16l4.712-5.132V16h2V4.024l4.715 5.136 1.465-1.364z" fill-rule="evenodd"/>\n  </svg>\n',o='\n  <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.768 2L5.276 14.493l-3.862-3.862L0 12.045l5.276 5.276L19.182 3.415z" fill-rule="evenodd"/>\n  </svg>\n',l='\n  <svg width="6" height="8" viewBox="0 0 6 8" xmlns="http://www.w3.org/2000/svg">\n    <path stroke="#979797" d="M1.5 1l3 3.128L1.746 7" fill="none" fill-rule="evenodd"/>\n  </svg>\n',c='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M13.524 1L8 6.524 2.476 1 1 2.476 6.523 8 1 13.524 2.476 15l5.523-5.524L13.524 15 15 13.524 9.476 8 15 2.476z" fill-rule="evenodd"/>\n  </svg>\n',u='\n<svg width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg">\n  <path d="M 6.761719 0.5 L 4 3.261719 L 1.238281 0.5 L 0.5 1.238281 L 3.261719 4 L 0.5 6.761719 L 1.238281 7.5 L 4 4.738281 L 6.761719 7.5 L 7.5 6.761719 L 4.738281 4 L 7.5 1.238281 Z M 6.761719 0.5 " fill-rule="evenodd"/>\n</svg>\n',d='\n  <svg width="21" height="15" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10.5 11.646c-2.032 0-3.678-1.724-3.678-3.851s1.646-3.85 3.678-3.85c2.033 0 3.676 1.723 3.676 3.85s-1.643 3.85-3.676 3.85m0-10.668C6.35.977 2.69 3.68.5 7.795c2.19 4.119 5.85 6.818 10 6.818 4.148 0 7.808-2.7 10-6.818-2.192-4.116-5.852-6.818-10-6.818" fill-rule="evenodd" />\n  </svg>\n',h='\n  <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10 15.929V2.072c3.388.486 6 3.408 6 6.928 0 3.521-2.612 6.442-6 6.929m0-15.87V0H8v.059C3.507.559 0 4.376 0 9c0 4.624 3.507 8.442 8 8.941V18h2v-.059c4.493-.499 8-4.317 8-8.941 0-4.624-3.507-8.441-8-8.941" fill-rule="evenodd"/>\n  </svg>\n',f='\n  <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M14.041 2l-1.517 1.52 4.72 4.72 1.516-1.52L14.041 2zM3.831 12.21l4.72 4.72 7.992-7.993-4.72-4.72-7.992 7.993zm-.652.75L2.36 18.4l5.44-.82-4.62-4.622z" fill-rule="evenodd"/>\n  </svg>\n',v='\n  <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1 0l1.712 12.246 2.96-3.306L9.157 14l2.205-1.524L7.85 7.532 12 6.18z" fill-rule="evenodd"/>\n  </svg>\n',p='\n  <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8 11.988l-4.962 2.945 1.327-5.531L0 5.682l5.75-.49L8 0l2.25 5.192 5.75.49-4.346 3.72 1.308 5.531z" fill-rule="evenodd" fill-opacity=".5"/>\n  </svg>\n',m='\n  <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.675 10.423L4.97 4.103l1.725-1.012 2.63 4.486 2.45-1.644 1.115 1.66-4.215 2.83zM9 0a9 9 0 0 0-9 9 9 9 0 0 0 9 9 9 9 0 0 0 9-9 9 9 0 0 0-9-9z" fill-rule="evenodd"/>\n  </svg>\n',y='\n  <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.705 10.332L5 4.012 6.725 3l2.63 4.486 2.45-1.644 1.115 1.66-4.215 2.83z" fill="#FFF" fill-rule="nonzero"/>\n  </svg>\n'},10:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),i=n(9),a=n(4);function s(){return Object(i.a)("DEBUG")&&"smartocto"===Object(r.a)(Object(r.d)(document.referrer||document.location.href))?"destentor":Object(a.b)()}},14:function(e,t,n){var r=n(61),i=n(35),a=/[T ]/,s=/:/,o=/^(\d{2})$/,l=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],c=/^(\d{4})/,u=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,h=/^-?(\d{3})$/,f=/^-?(\d{2})-?(\d{2})$/,v=/^-?W(\d{2})$/,p=/^-?W(\d{2})-?(\d{1})$/,m=/^(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,g=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,w=/([Z+-].*)$/,b=/^(Z)$/,_=/^([+-])(\d{2})$/,T=/^([+-])(\d{2}):?(\d{2})$/;function L(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}e.exports=function(e,t){if(i(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var S=function(e){var t,n={},r=e.split(a);s.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1]);if(t){var i=w.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e),E=function(e,t){var n,r=l[t],i=u[t];if(n=c.exec(e)||i.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=o.exec(e)||r.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}(S.date,n),A=E.year,x=function(e,t){if(null===t)return null;var n,r,i,a;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=d.exec(e))return r=new Date(0),i=parseInt(n[1],10)-1,r.setUTCFullYear(t,i),r;if(n=h.exec(e)){r=new Date(0);var s=parseInt(n[1],10);return r.setUTCFullYear(t,0,s),r}if(n=f.exec(e)){r=new Date(0),i=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return r.setUTCFullYear(t,i,o),r}if(n=v.exec(e))return a=parseInt(n[1],10)-1,L(t,a);if(n=p.exec(e)){a=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return L(t,a,l)}return null}(E.restDateString,A);if(x){var k,O=x.getTime(),P=0;if(S.time&&(P=function(e){var t,n,r;if(t=m.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=y.exec(e))return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),n%24*36e5+6e4*r;if(t=g.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return n%24*36e5+6e4*r+1e3*i}return null}(S.time)),S.timezone)k=6e4*function(e){var t,n;if(t=b.exec(e))return 0;if(t=_.exec(e))return n=60*parseInt(t[2],10),"+"===t[1]?-n:n;if(t=T.exec(e))return n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n;return 0}(S.timezone);else{var M=O+P,D=new Date(M);k=r(D);var I=new Date(M);I.setDate(D.getDate()+1);var C=r(I)-r(D);C>0&&(k+=C)}return new Date(O+P+k)}return new Date(e)}},155:function(e,t){},2:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){var a=void 0;try{a=new CustomEvent(e,{bubbles:r,cancelable:i,detail:t})}catch(n){(a=document.createEvent("CustomEvent")).initCustomEvent(e,r,i,t)}n.dispatchEvent(a)}}n.d(t,"a",(function(){return r}))},25:function(e,t,n){var r=n(66);e.exports=function(e){return r(e,{weekStartsOn:1})}},33:function(e,t,n){(function(){"use strict";function n(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n={speed:500,minDuration:250,maxDuration:1500,cancelOnUserAction:!0,element:window,horizontal:!1,onComplete:void 0,passive:!0,offset:0},r=Object.keys(n),i=0;i<r.length;i++){var a=r[i];void 0!==t[a]&&(n[a]=t[a])}if(!n.cancelOnUserAction&&n.passive&&(n.passive=!1,t.passive&&console&&console.warn('animated-scroll-to:\n "passive" was set to "false" to prevent errors, as using "cancelOnUserAction: false" doesn\'t work with passive events.')),e instanceof HTMLElement)if(t.element&&t.element instanceof HTMLElement)e=n.horizontal?e.getBoundingClientRect().left+t.element.scrollLeft-t.element.getBoundingClientRect().left:e.getBoundingClientRect().top+t.element.scrollTop-t.element.getBoundingClientRect().top;else if(n.horizontal){var s=window.scrollX||document.documentElement.scrollLeft;e=s+e.getBoundingClientRect().left}else{var o=window.scrollY||document.documentElement.scrollTop;e=o+e.getBoundingClientRect().top}e+=n.offset,n.isWindow=n.element===window;var l=null,c=0,u=null;n.isWindow?n.horizontal?(l=window.scrollX||document.documentElement.scrollLeft,c=window.scrollY||document.documentElement.scrollTop,u=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth):(l=window.scrollY||document.documentElement.scrollTop,c=window.scrollX||document.documentElement.scrollLeft,u=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight):n.horizontal?(l=n.element.scrollLeft,u=n.element.scrollWidth-n.element.clientWidth):(l=n.element.scrollTop,u=n.element.scrollHeight-n.element.clientHeight),e>u&&(e=u);var d=e-l;if(0!==d){var h=Math.abs(Math.round(d/1e3*n.speed));h<n.minDuration?h=n.minDuration:h>n.maxDuration&&(h=n.maxDuration);var f=Date.now(),v=null,p=null,m={passive:n.passive};n.cancelOnUserAction?(p=function(){y(),cancelAnimationFrame(v),n.onComplete&&"function"==typeof n.onComplete&&n.onComplete(!0)},window.addEventListener("keydown",p,m),window.addEventListener("mousedown",p,m)):(p=function(e){e.preventDefault()},n.element.addEventListener("scroll",p,m)),n.element.addEventListener("wheel",p,m),n.element.addEventListener("touchstart",p,m);var y=function(){n.element.removeEventListener("wheel",p,m),n.element.removeEventListener("touchstart",p,m),n.cancelOnUserAction?(window.removeEventListener("keydown",p,m),window.removeEventListener("mousedown",p,m)):n.element.removeEventListener("scroll",p,m)},g=function(){var t=Date.now()-f,r=t/h-1,i=r*r*r+1,a=Math.round(l+d*i),s=function(e){n.isWindow?n.horizontal?n.element.scrollTo(e,c):n.element.scrollTo(c,e):n.horizontal?n.element.scrollLeft=e:n.element.scrollTop=e};t<h&&a!==e?(s(a),v=requestAnimationFrame(g)):(s(e),cancelAnimationFrame(v),y(),n.onComplete&&"function"==typeof n.onComplete&&n.onComplete(!1))};v=requestAnimationFrame(g)}else n.onComplete&&"function"==typeof n.onComplete&&n.onComplete(!1)}e.exports&&(e.exports=n,t=e.exports),t.default=n}).call(this)},35:function(e,t){e.exports=function(e){return e instanceof Date}},36:function(e,t,n){var r=n(14),i=n(25);e.exports=function(e){var t=r(e),n=t.getFullYear(),a=new Date(0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);var s=i(a),o=new Date(0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);var l=i(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}},37:function(e,t,n){var r=n(69),i=n(70);e.exports={distanceInWords:r(),format:i()}},4:function(e,t,n){"use strict";function r(){var e=window.tentaclesProfile;window.parent.postMessage({type:"tentacles:setLocalSettings",profile:e},"*")}function i(){return window.tentaclesProfile.activefilter}function a(e){if(e){var t=window.tentaclesProfile;window.tentaclesProfile=Object.assign({},t,{activefilter:e}),r()}}function s(){return!!window.tentaclesProfile.hasOwnProperty("mystoriesfilter")&&window.tentaclesProfile.mystoriesfilter}function o(e){if(null!==e){var t=window.tentaclesProfile;window.tentaclesProfile=Object.assign({},t,{mystoriesfilter:"true"===String(e)}),r()}}function l(){return!!window.tentaclesProfile.hasOwnProperty("showranking")&&window.tentaclesProfile.showranking}function c(e){if(null!==e){var t=window.tentaclesProfile;window.tentaclesProfile=Object.assign({},t,{showranking:"true"===String(e)}),r()}}function u(e){if(e){var t=window.tentaclesProfile;window.tentaclesProfile=Object.assign({},t,{brand:e})}}function d(){return window.tentaclesProfile.brand}n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return l})),window.tentaclesProfile={}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(8);function i(e){return Object(r.b)(e),e.split(".").reverse()[1]}function a(e){return e=e.replace(/^~\w/,"")}function s(e){var t="body";return-1!==e.indexOf("_id")&&(t="id"),{relationId:(e=e.split("_"+t))[0],xPath:t+e[1]}}function o(e){var t=e.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i);return t&&t[1]}},53:function(e,t,n){var r=n(60),i=n(65),a=n(36),s=n(14),o=n(68),l=n(37);var c={M:function(e){return e.getMonth()+1},MM:function(e){return h(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return h(e.getDate(),2)},DDD:function(e){return r(e)},DDDD:function(e){return h(r(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return i(e)},WW:function(e){return h(i(e),2)},YY:function(e){return h(e.getFullYear(),4).substr(2)},YYYY:function(e){return h(e.getFullYear(),4)},GG:function(e){return String(a(e)).substr(2)},GGGG:function(e){return a(e)},H:function(e){return e.getHours()},HH:function(e){return h(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return h(c.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return h(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return h(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return h(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return h(e.getMilliseconds(),3)},Z:function(e){return d(e.getTimezoneOffset(),":")},ZZ:function(e){return d(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function u(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function d(e,t){t=t||"";var n=e>0?"-":"+",r=Math.abs(e),i=r%60;return n+h(Math.floor(r/60),2)+t+h(i,2)}function h(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}e.exports=function(e,t,n){var r=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",i=(n||{}).locale,a=l.format.formatters,d=l.format.formattingTokensRegExp;i&&i.format&&i.format.formatters&&(a=i.format.formatters,i.format.formattingTokensRegExp&&(d=i.format.formattingTokensRegExp));var h=s(e);return o(h)?function(e,t,n){var r,i,a=e.match(n),s=a.length;for(r=0;r<s;r++)i=t[a[r]]||c[a[r]],a[r]=i||u(a[r]);return function(e){for(var t="",n=0;n<s;n++)a[n]instanceof Function?t+=a[n](e,c):t+=a[n];return t}}(r,a,d)(h):"Invalid Date"}},6:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o}));var r=310,i=300,a={"adjust-title":"pencil","move-down":"arrow-down","move-index":"arrow-left","move-subindex":"arrow-right","move-up":"arrow-up",remove:"cross","start-test":"headertest"},s={active:"watch",completed:"checkmark"},o={high:"red",low:"green",normal:"neutral"}},60:function(e,t,n){var r=n(14),i=n(62),a=n(63);e.exports=function(e){var t=r(e);return a(t,i(t))+1}},61:function(e,t){e.exports=function(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},62:function(e,t,n){var r=n(14);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},63:function(e,t,n){var r=n(64);e.exports=function(e,t){var n=r(e),i=r(t),a=n.getTime()-6e4*n.getTimezoneOffset(),s=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((a-s)/864e5)}},64:function(e,t,n){var r=n(14);e.exports=function(e){var t=r(e);return t.setHours(0,0,0,0),t}},65:function(e,t,n){var r=n(14),i=n(25),a=n(67);e.exports=function(e){var t=r(e),n=i(t).getTime()-a(t).getTime();return Math.round(n/6048e5)+1}},66:function(e,t,n){var r=n(14);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,i=r(e),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}},67:function(e,t,n){var r=n(36),i=n(25);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),i(n)}},68:function(e,t,n){var r=n(35);e.exports=function(e){if(r(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},69:function(e,t){e.exports=function(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,n,r){var i;return r=r||{},i="string"==typeof e[t]?e[t]:1===n?e[t].one:e[t].other.replace("{{count}}",n),r.addSuffix?r.comparison>0?"in "+i:i+" ago":i}}}},7:function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a,s,o;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function v(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,a,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return v(this,e,!0)},o.prototype.rawListeners=function(e){return v(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},70:function(e,t,n){var r=n(71);e.exports=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["AM","PM"],o=["am","pm"],l=["a.m.","p.m."],c={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return n[e.getDay()]},ddd:function(e){return i[e.getDay()]},dddd:function(e){return a[e.getDay()]},A:function(e){return e.getHours()/12>=1?s[1]:s[0]},a:function(e){return e.getHours()/12>=1?o[1]:o[0]},aa:function(e){return e.getHours()/12>=1?l[1]:l[0]}};return["M","D","DDD","d","Q","W"].forEach((function(e){c[e+"o"]=function(t,n){return function(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(n[e](t))}})),{formatters:c,formattingTokensRegExp:r(c)}}},71:function(e,t){var n=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);var i=n.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r="^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$";function i(e){if(e.match(r)&&e.indexOf(".")<0)return!0;throw new Error("Invalid brandID: "+e+" is not a valid brandID.")}function a(e){if("string"==typeof e&&e.match(r))return!0;throw new Error("Invalid host name: "+e+" is not a valid host name.")}function s(e){if(e&&e.length>0&&e.indexOf("/")<0&&e.indexOf("~")<0)return!0;throw new Error("Invalid relationID: "+e+" is not a valid relationID.")}},88:function(e,t,n){"use strict";n.r(t);n(155);var r=n(9),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){var n=[],r=void 0;for(r in e)if(e.hasOwnProperty(r)){var s=t?t+"["+r+"]":r,o=e[r];n.push(null!==o&&"object"===(void 0===o?"undefined":i(o))?a(o,s):{key:s,value:o})}return n}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,s){var o=new URL(Object(r.a)("API_URL")),l=o.origin,c=o.pathname,u=new URL(""+c+t,l),d=a(n);-1===t.indexOf("login")&&u.searchParams.set("api_key","u:"+window.token),"get"===e.toLowerCase()&&d.forEach((function(e){u.searchParams.set(e.key,e.value)}));var h=new XMLHttpRequest;h.open(e,u.toString()),h.setRequestHeader("Content-Type","application/json"),h.onload=function(){this.status>=200&&this.status<300?i(JSON.parse(h.response)):s({status:this.status,statusText:h.statusText})},h.onerror=function(){s({status:this.status,statusText:h.statusText})},n="get"!==e.toLowerCase()?JSON.stringify(n):{},h.send(n)}))}var o=n(4);var l={},c=["AVATAR","IS_LOGGED_IN","PATHNAME","USERNAME"],u={},d={};function h(e,t){e in u?u.push(t):u[e]=[t],e in l&&t(l[e],e)}function f(e,t){if(!(c.indexOf(e)>=0))throw new Error("Invalid state parameter: "+e);l[e]=t,e in u&&u[e].forEach((function(t){return t(l[e],e)})),e in d&&(d[e].forEach((function(t){return t(l[e],e)})),delete d[e])}function v(e){if(c.indexOf(e)>=0)return l[e];throw new Error("Invalid state parameter: "+e)}var p=n(2),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.form=this.element.querySelector("form"),this.error=this.element.querySelector("[data-role=error]"),this.errorMessage=this.element.querySelector("[data-role=error-message]"),this.form.addEventListener("submit",this.onLogin.bind(this))}return m(e,[{key:"addEventListener",value:function(e,t){this.element.addEventListener(e,t)}},{key:"onLogin",value:function(e){var t=this;e.preventDefault();var n,r,i=new FormData(e.target);(n=i.get("email"),r=i.get("password"),s("POST","/auth/login",{userid:n,password:r})).then((function(e){!0===e.login_status?e.token?(window.token=e.token,window.parent.postMessage({type:"tentacles:setAuthCookie",token:e.token},"*"),f("IS_LOGGED_IN",!0),s("GET","/user").then((function(e){f("AVATAR",e.imageUrl),f("USERNAME",e.name)})),Object(p.a)("loginSuccessful",{},t.element)):console.log("missing login token"):(t.error.classList.add("is-visible"),t.form.querySelector("[name=email").classList.add("is-invalide"),t.form.querySelector("[name=password").classList.add("is-invalide"))})).catch((function(e){console.log("error",e)}))}},{key:"show",value:function(){this.element.classList.add("is-visible")}},{key:"hide",value:function(){this.element.classList.remove("is-visible")}}]),e}(),g=n(10),w=n(8),b=n(5);var _=n(7),T=n.n(_),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.element=e,n.isMinimized=!1,n._loadDataInitialized=!1,n.element.querySelector("[data-role=overview-panel__open-menu]").addEventListener("click",(function(){n.emit("toggle-menu")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),L(t,[{key:"loadData",value:function(){v("PATHNAME")?this._loadWithPathname(v("PATHNAME")):this._loadDataInitialized||(this._loadDataInitialized=!0,h("PATHNAME",this._loadWithPathname.bind(this)))}},{key:"refresh",value:function(){this.loadData()}},{key:"maximize",value:function(){this.isMinimized&&(this.element.classList.remove("overview-panel--minimized"),this.isMinimized=!1)}},{key:"minimize",value:function(){this.isMinimized||(this.element.classList.add("overview-panel--minimized"),this.isMinimized=!0)}},{key:"_loadWithPathname",value:function(e){var t,n,r=this;(t=Object(g.a)(),n=e,Object(w.a)(t),s("GET","/brands/"+t+"/tentacles/numbers",{path:n=n||"/"})).then((function(e){r.element.querySelector('[data-role="overview-panel__clicks"]').innerText=e.clicks,r.element.querySelector('[data-role="overview-panel__tests"]').innerText=e.tests,r.element.querySelector('[data-role="overview-panel__views"]').innerText=e.views}))}}]),t}(T.a),E=n(0),A=0;function x(e){var t=e.offsetHeight-e.clientHeight,n=function(e){e.style.height="auto",e.style.height=Math.max(20,e.scrollHeight+t)+"px"};n(e),e.addEventListener("keyup",(function(){return n(e)})),e.addEventListener("input",(function(){return n(e)}))}function k(e,t,n){var r=e.getAttribute("data-original-text")||null;r?t=r:e.setAttribute("data-original-text",t),n=n||1e3;var i=t.substr(0,n).split(" ");if(e.innerText=i.join(" "),0===e.scrollHeight||0===e.offsetHeight)return!1;for(;i.length>0&&e.scrollHeight>e.offsetHeight;)i.pop(),e.innerText=i.join(" ")+" ...";return!0}var O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var P=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.postData=e,n.relationId=e.post_id,n.teaserPosition=e.teaserPosition,n.generate(),n.selectClickBind=n.select.bind(n),n.element.addEventListener("click",n.selectClickBind),n.messageBind=n.onMessage.bind(n),window.addEventListener("message",n.messageBind),n.isSelected=!1,n.textBoxEllipsisApplied=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),O(t,[{key:"generate",value:function(){var e,t=document.createElement("li");if(t.classList.add("list-article"),this.postData.iconClasses){var n=!0,r=!1,i=void 0;try{for(var a,s=this.postData.iconClasses[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.classList.add("list-article--"+o)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}t.innerHTML='\n      <div class="list-article__main">\n        <h4 class="list-article__title" data-role="list-article__title">'+this.postData.title+'</h4>\n\n        <div class="list-article__status">\n          <ul class="status-icon">\n            <li class="status-icon__arrow-down">'+E.a+'</li>\n            <li class="status-icon__arrow-left">'+E.b+'</li>\n            <li class="status-icon__arrow-right">'+E.c+'</li>\n            <li class="status-icon__arrow-up">'+E.d+'</li>\n            <li class="status-icon__checkmark">'+E.e+'</li>\n            <li class="status-icon__cross">'+E.g+'</li>\n            <li class="status-icon__headertest">'+E.i+'</li>\n            <li class="status-icon__pencil">'+E.j+'</li>\n            <li class="status-icon__watch">'+E.n+'</li>\n          </ul>\n        </div>\n        <div class="list-article__paid '+(this.postData.payedArticle?"":"hide")+'"></div>\n      </div>\n      <div class="list-article__footer">\n        <progress class="list-article__performance" value="'+100*(e=this.postData,A>0?e.sortClicks/A:1)+'" max="100"></progress>\n      </div>\n    ',this.element=t}},{key:"onIsVisible",value:function(){var e=this;this.textBoxEllipsisApplied,this.textBoxEllipsisApplied=k(this.element.querySelector('[data-role="list-article__title"]'),this.postData.title,80),setTimeout((function(){e.textBoxEllipsisApplied=k(e.element.querySelector('[data-role="list-article__title"]'),e.postData.title,80)}),1e3)}},{key:"onMessage",value:function(e){"anchor:selected"===e.data.type&&e.data.teaserPosition===this.teaserPosition&&this.select(!1)}},{key:"select",value:function(e){e=!1!==e,this.isSelected?e&&window.parent.postMessage({type:"tentacles:articleSelected",teaserPosition:this.teaserPosition},"*"):(this.isSelected=!0,this.emit("select",{listArticle:this}),e&&window.parent.postMessage({type:"tentacles:articleSelected",teaserPosition:this.teaserPosition},"*"),this.element.classList.add("is-selected"))}},{key:"reselect",value:function(){this.isSelected&&this.element.classList.add("is-selected")}},{key:"deselect",value:function(){this.isSelected&&(this.isSelected=!1,this.emit("deselect",{listArticle:this}),this.element.classList.remove("is-selected"))}},{key:"destroy",value:function(){this.removeAllListeners("select"),this.removeAllListeners("deselect"),window.removeEventListener("message",this.messageBind),this.element.removeEventListener("click",this.selectClickBind),this.element.remove()}}]),t}(T.a);var M=n(6);var D=n(33),I=n.n(D),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var j=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.input=e.querySelector("input"),n&&(r.input.checked=!0),e.querySelector("[data-role=switch__value-off]").addEventListener("click",(function(){r.input.checked=!1,r.onChange()})),e.querySelector("[data-role=switch__value-on]").addEventListener("click",(function(){r.input.checked=!0,r.onChange()})),r.input.addEventListener("change",(function(){r.onChange()})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),C(t,[{key:"onChange",value:function(){this.emit("change",this.input.checked)}}]),t}(T.a),q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var F=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.element=document.getElementById("menu"),h("AVATAR",(function(t){e.element.querySelector("[data-role=menu__avatar]").src=t})),h("USERNAME",(function(t){e.element.querySelector("[data-role=menu__user]").innerText=t})),e.element.querySelector("[data-role=menu__close]").addEventListener("click",(function(t){t.preventDefault(),e.hide()})),e.element.querySelector("[data-role=menu__sign-out]").addEventListener("click",(function(t){t.preventDefault(),s("GET","/auth/logout").then((function(){f("IS_LOGGED_IN",!1),delete window.token,window.parent.postMessage({type:"tentacles:logout"},"*"),e.hide()}))})),e.isOpen=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),q(t,[{key:"reInit",value:function(e){var t=Object(r.a)("SMARTOCTO_URL").replace(/\[brandId\]/g,e);[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.element.querySelectorAll("a"))).forEach((function(n){n.setAttribute("href",(n.getAttribute("href")||"").replace(/\[smartoctoUrl\]/g,t).replace(/undefined/g,e))}))}},{key:"show",value:function(){this.isOpen||(this.element.classList.add("is-visible"),this.isOpen=!0)}},{key:"hide",value:function(){var e=this;this.isOpen&&(this.element.classList.add("is-faded"),setTimeout((function(){e.element.classList.remove("is-visible"),e.element.classList.remove("is-faded"),e.isOpen=!1}),400))}},{key:"toggle",value:function(){this.isOpen?this.hide():this.show()}}]),t}(T.a);var H=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var R=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.dataInitialized=!1,this.articleList=t.querySelector("ul[data-role=article-list]"),this.filterToggle=t.querySelector("[data-role=toggle-filter]"),this.filterPanel=t.querySelector("[data-role=filter-panel]"),this.filterList=t.querySelector("ul[data-role=filter-list]"),this.selectedFilter=t.querySelector("[data-role=selected-filter]"),this.selectedFilterTitle=t.querySelector("[data-role=selected-filter-title]"),this.defaultFilter=Number(Object(o.a)())||3,this.myStoriesFilter=Object(o.c)(),this.showRanking=Object(o.d)(),this.showRankingSwitch,this.articles=[],this.activeArticle=null,this.activeArticleObject=null,this.previousPosts=[],this.previousPath=null,this.previousFilterId=null,this.previousMyStoriesFilter=null,this.pageUrls=null,this.currentLocation=null,this.filters=[{title:"Urgent",id:"urgent",emptyMessage:"There are no urgent actions",emptyMessagePersonal:"There are no urgent actions for your teasers"},{title:"Least performing",id:"leastperf",emptyMessage:"There are no teasers",emptyMessagePersonal:"Today no teasers from you! But I love a good story. Know any?"},{title:"Testing",id:"testing",emptyMessage:"There are no tests running. Why don't you try one?!",emptyMessagePersonal:"You don't have any tests at the moment. Why don't you try one?"},{title:"Best performing",id:"bestperf",emptyMessage:"There are no teasers",emptyMessagePersonal:"Today no teasers from you! But I love a good story. Know any?"}],this.selectFilter(this.defaultFilter),this.rankingDisabledFilters=["urgent","testing"],this.filterToggle.addEventListener("click",(function(e){e.preventDefault(),n.onToggleFilterPanel()})),this.menu=new F,this.setupOverviewPanel()}return z(e,[{key:"setupOverviewPanel",value:function(){var e=this;this.overviewPanel=new S(this.element.querySelector("[data-role=overview-panel]")),this.overviewPanel.addListener("toggle-menu",(function(){e.menu.toggle()})),this.articleList.addEventListener("scroll",(function(){0===e.articleList.scrollTop?e.overviewPanel.maximize():e.overviewPanel.minimize()}))}},{key:"initializeFilters",value:function(){var e=this;new j(this.element.querySelector("[data-role=mystories-switch]"),this.myStoriesFilter).addListener("change",(function(t){e.myStoriesFilter=t,Object(o.g)(e.myStoriesFilter),e.setArticlesHeaderLabel(),e.dataInitialized&&e.refreshArticles()})),this.setArticlesHeaderLabel();var t=!0,n=!1,r=void 0;try{for(var i,a=Object.entries(this.filters)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,l=H(s,2),c=l[0],u=l[1],d=document.createElement("li");d.innerText=u.title,d.classList.add("filter"),d.addEventListener("click",(function(t){t.preventDefault(),e.onFilterClick(t)})),d.setAttribute("data-filter-key",c),this.filterList.appendChild(d),this.currentFilter===this.filters[c]&&d.classList.add("is-active"),this.filters[c].node=d}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this.showRankingSwitch=new j(this.element.querySelector("[data-role=showranking-switch]"),this.showRanking),this.showRankingSwitch.addListener("change",(function(t){e.rankingDisabledFilters.indexOf(e.filters[Object(o.a)()].id)>=0?(e.showRankingSwitch.input.checked&&alert("You can't use numbers with this filter."),e.showRankingSwitch.input.checked=!1,e.showRanking=!1):(e.showRanking=t,Object(p.a)("show-ranking-status",{status:t},e.element),Object(o.h)(e.showRanking))}))}},{key:"onFilterClick",value:function(e){var t=e.currentTarget,n=Number(t.getAttribute("data-filter-key"));this.rankingDisabledFilters.indexOf(this.filters[n].id)>=0&&(this.showRanking=!1,Object(o.h)(this.showRanking),Object(p.a)("show-ranking-status",{status:this.showRanking},this.element),this.element.querySelector("[data-role=showranking-switch]",this.showRanking),this.showRankingSwitch.input.checked=this.showRanking),this.selectFilter(n)}},{key:"onToggleFilterPanel",value:function(){this.toggleFilterPanel()}},{key:"toggleFilterPanel",value:function(e){var t=this;if(!1===e||!0===e?e:!this.filterPanel.classList.contains("is-visible")){this.filterPanel.classList.add("is-visible"),this.filterPanel.setAttribute("style","");var n=function(e){var t=e.cloneNode(!0);t.classList.add("at-full-height"),document.body.appendChild(t);var n=t.clientHeight;return document.body.removeChild(t),n}(this.filterPanel);setTimeout((function(){t.filterPanel.style.height=n+"px"}),1)}else this.filterPanel.style.height="0",setTimeout((function(){t.filterPanel.classList.remove("is-visible")}),200)}},{key:"setArticlesHeaderLabel",value:function(){this.element.querySelector("[data-role=articles__header-label]").innerText=this.myStoriesFilter?"My teasers:":"Teasers:"}},{key:"selectArticle",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=this.articles[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.relationId===e&&o.select(t)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}},{key:"selectFilter",value:function(e){var t=this.filters[e];this.toggleFilterPanel(!1),this.selectedFilterTitle.innerText=t.title,this.selectedFilter.classList.add("is-visible"),this.currentFilter&&this.currentFilter.node&&this.currentFilter.node.classList.remove("is-active"),this.currentFilter=t,this.currentFilter.node&&this.currentFilter.node.classList.add("is-active"),Object(o.e)(e),this.dataInitialized&&this.refreshArticles()}},{key:"initMyStoriesFilterState",value:function(){this.myStoriesFilter=Object(o.c)()}},{key:"initShowRankingState",value:function(){this.showRanking=Object(o.d)()}},{key:"addEventListener",value:function(e,t){this.element.addEventListener(e,t)}},{key:"onArticleSelect",value:function(e){var t=e.listArticle,n=t.element;this.activeArticleObject&&this.activeArticleObject.deselect(),this.toggleFilterPanel(!1),this.activeArticleObject=t,this.activeArticle=t.relationId,this.showRanking=Object(o.d)();var r=this.articleList.getBoundingClientRect().height,i=n.getBoundingClientRect().height,a=n.getBoundingClientRect().top-this.articleList.getBoundingClientRect().top;a<0&&I()(this.articleList.scrollTop+a,{element:this.articleList,minDuration:200,maxDuration:200}),a>r&&I()(this.articleList.scrollTop+(a-r+i),{element:this.articleList,minDuration:200,maxDuration:200})}},{key:"loadData",value:function(){var e=this;return new Promise((function(t,n){e.dataInitialized?t():(e.dataInitialized=!0,e.refresh().then((function(){t()})))}))}},{key:"refresh",value:function(){return Promise.all([this.refreshArticles(),this.overviewPanel.refresh()])}},{key:"refreshArticles",value:function(){var e=this;return new Promise((function(t,n){if(!v("PATHNAME"))return i=function(){e.refreshArticles(),t()},void((r="PATHNAME")in d?d.push(i):d[r]=[i]);var r,i;(function(e,t,n,r){Object(w.a)(e);var i={path:r||"/"};return t&&(i.filter=n?t+"user":t),s("GET","/brands/"+e+"/stories/",i)})(Object(g.a)(),e.currentFilter.id,e.myStoriesFilter,v("PATHNAME")).then((function(n){var r;if(n.posts&&0===n.posts.length&&e.previousPath===v("PATHNAME")&&e.previousMyStoriesFilter===e.myStoriesFilter&&e.previousFilterId===e.currentFilter.id&&(n.posts=e.previousPosts),function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.iconClasses=[];var o=!0,l=!1,c=void 0;try{for(var u,d=s.positions[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;h.action||(h.action={}),h.action.iconClasses=[];var f=h.action;f.name&&f.name in M.a&&(s.iconClasses.push(M.a[f.name]),h.action.iconClasses.push(M.a[f.name])),f.priority&&f.priority in M.e&&(s.iconClasses.push(M.e[f.priority]),h.action.iconClasses.push(M.e[f.priority])),f.color&&(s.iconClasses.push(f.color),h.action.iconClasses.push(f.color)),s.activeTest&&s.activeTest in M.d&&(s.iconClasses.push(M.d[s.activeTest]),h.action.iconClasses.push(M.d[s.activeTest]))}}catch(e){l=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw c}}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}(n.posts),Object(p.a)("articles:articles-refreshed",{articles:n.posts},e.element),Object(p.a)("show-ranking-status",{status:Object(o.d)()},e.element),(r=n.posts)&&r.length&&!isNaN(r[0].sortClicks)&&(A=r.reduce((function(e,t){return Math.max(t.sortClicks,e)}),0),r.reduce((function(e,t){return t.sortClicks+e}),0)),e.articles.forEach((function(e){return e.destroy()})),e.articleList.innerHTML="",e.activeArticleObject=null,n.posts&&n.posts.length>0){var i=!0,a=!1,s=void 0;try{for(var l,c=n.posts[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,d=null;if(u.positions.sort((function(e,t){return e.xPath<t.xPath?1:-1})),u.positions){var h=!0,f=!1,m=void 0;try{for(var y,g=u.positions[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var w=y.value;u.teaserPosition=u.post_id+"_"+w.xPath,d=new P(Object.assign(u,w))}}catch(e){f=!0,m=e}finally{try{!h&&g.return&&g.return()}finally{if(f)throw m}}}d&&(d.relationId===e.activeArticle&&(e.activeArticleObject=d,d.isSelected=!0,d.reselect()),e.articleList.appendChild(d.element),d.on("select",e.onArticleSelect.bind(e)),e.articles.push(d))}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}if(e.isShown){var b=!0,_=!1,T=void 0;try{for(var L,S=e.articles[Symbol.iterator]();!(b=(L=S.next()).done);b=!0){(d=L.value).onIsVisible()}}catch(e){_=!0,T=e}finally{try{!b&&S.return&&S.return()}finally{if(_)throw T}}}e.previousPath=v("PATHNAME"),e.previousMyStoriesFilter=e.myStoriesFilter,e.previousFilterId=e.currentFilter.id,e.previousPosts=n.posts}else{var E=document.createElement("li");if(E.classList.add("articles__empty-message"),E.innerHTML=e.myStoriesFilter?e.currentFilter.emptyMessagePersonal:e.currentFilter.emptyMessage,e.articleList.appendChild(E),e.pageUrls&&-1===e.pageUrls.indexOf(e.currentLocation)){var x=document.createElement("li");x.classList.add("articles__empty-message"),x.innerHTML="This page is not set up for position optimisation, but you can perform a teaser-test.",e.articleList.appendChild(x)}}t()})).catch((function(e){console.log("getUrls error:",e)}))}))}},{key:"setPageUrls",value:function(e,t){e&&(this.pageUrls=JSON.parse(e),this.currentLocation=t)}},{key:"show",value:function(){this.isShown||(this.isShown=!0,this.loadData(),this.element.classList.add("is-visible"))}},{key:"hide",value:function(){this.isShown&&(this.isShown=!1,this.element.classList.remove("is-visible"))}}]),e}();var N=1;var B=n(53),U=n.n(B),Y={nl:n(37)},G={date:"dddd D MMMM YYYY"};var W=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function $(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var V=["a","b","c","d","e","f","g","h","i","j","k","l","m"],Z={active:"in progress",completed:"finished",canceled:"preparing",default:"preparing"};function X(e){e.classList.add("is-visible")}function J(e){e.classList.remove("is-visible")}var K=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.element=e,n.dataEntered=!1,n.currentArticleId=null,n.currentTeaserType=null,n.inputFocus=null,n.isVisible=!1,n.currentItemCount=1,n.isInitialized=!1,n.previewedItem=null,n.originalTitle=null,n.headertestData=null,n.articleData=null,n.activeElementHtml=null,n.pageTitle=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),W(t,[{key:"initialize",value:function(){var e=this;if(!this.isInitialized){this.isInitialized=!0,this.mainElement=this.element.querySelector("[data-role=abtester__main]"),this.loadingElement=this.element.querySelector("#abtester__loading"),this.createElement=this.element.querySelector("[data-role=abtester__create]"),this.activeElement=this.element.querySelector("[data-role=abtester__active]"),this.element.querySelector('[data-role="ab-test-return"]').addEventListener("click",(function(t){t.preventDefault(),e.emit("close");var n=document.querySelector('[name="option-a"]');n.value="",n.disabled=!0,n.setAttribute("focus","true"),document.querySelector('[data-role="abtester__add-item"]').classList.remove("is-visible");var r=e.element.querySelectorAll("[id^=option0]").length;if(r>1)for(var i=1;i<r;i++)e.removeSubItem(i);window.parent.postMessage({type:"tentacles:articleSelected"},"*"),window.parent.postMessage({type:"tentacles:removeEventListeners"},"*")}));var t=document.querySelector('[data-role="abtester__create"]');t.addEventListener("submit",(function(n){if(n.preventDefault(),!(e.currentItemCount<2)){var r=new FormData(t),i=null,a=!0,o=!1,l=void 0;try{for(var c,u=V.slice(0,e.currentItemCount)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(!(T=r.get("option-"+d))||T.replace(/ /g,"").length<1){var h=e.element.querySelector('[data-role="abtester__item-list"]').querySelector("[data-variant="+d+"]");h.classList.add("has-error"),i||(i=h)}for(var f=0;f<10;f++){var v=r.get("option-"+d+"_"+f);if(null!==v&&v.replace(/ /g,"").length<1){var p=e.element.querySelector('[data-role="abtester__item-list"]').querySelector("[data-variant="+d+"_"+f+"]");p.parentNode.parentNode.classList.add("has-error"),i||(i=p)}}}}catch(e){o=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw l}}if(i)i.querySelector("textarea").focus();else{for(var m=V.slice(0,e.currentItemCount).map((function(e){return r.get("option-"+e)})).filter((function(e){return e&&e.length>0})).map((function(e){return{title:e}})),y=0;y<m.length;y++){var _=V[y];for(f=0;f<10;f++){var T;null!==(T=r.get("option-"+_+"_"+f))&&T.replace(/ /g,"").length>0&&(m[y].title=m[y].title+"$$"+T)}}var L=m[0].title;e.setMode(3),e.clearData(),function(e,t,n,r,i){return Object(w.a)(e),Object(w.c)(t),s("POST","/brands/"+e+"/headertests/"+t,"video"===r?{testData:n,postType:"video",status:"active",currentTitle:i}:{testData:n,postType:"story",status:"active",currentTitle:i})}(Object(g.a)(),Object(b.b)(e.currentArticleId),m,e.currentTeaserType,L).then((function(t){setTimeout((function(){e.emit("data-change"),e.loadArticle(e.currentArticleId,e.currentTeaserType)}),1100)}))}}}));var n=this.element.querySelector('[data-role="abtester__item-list"]').children[0];n.querySelector('[data-role="abtester__toggle-preview"]').addEventListener("click",(function(){var t=n.querySelector('[data-role="ab-test-original-title"]');n.classList.toggle("is-previewing");var r=n.classList.contains("is-previewing"),i=e.getValueAllTextareas(t);r?e.previewTitle(n,i,e.pageTitle,e.currentTeaserType):e.restorePreviewedTitle()})),document.querySelector('[data-role="abtester__cancel-button"]').addEventListener("click",(function(){var t,n;e.currentArticleId&&confirm("Are you sure you want to stop the A/B test?")&&(e.clearData(),e.setMode(3),(t=Object(g.a)(),n=Object(b.b)(e.currentArticleId),s("POST","/brands/"+t+"/headertests/"+n,{status:"cancel"})).then((function(){setTimeout((function(){e.emit("data-change"),e.loadArticle(e.currentArticleId,e.currentTeaserType)}),1100)})))})),document.querySelector('[data-role="abtester__redo-button"]').addEventListener("click",(function(){e.currentArticleId&&(e.clearData(),e.headertestData={},e.setMode(1))})),this.element.querySelector('[data-role="abtester__add-item"]').addEventListener("click",(function(){e.appendItem()})),this.element.querySelector('[data-role="abtester__add-subitem"]').addEventListener("click",(function(){e.appendSubItem()}))}}},{key:"setMode",value:function(e){this.currentMode=e,1===e&&(this._initializeCreateMode(),J(this.loadingElement),X(this.mainElement)),2===e&&(this._initializeWatchMode(),J(this.loadingElement),X(this.mainElement)),3===e&&(J(this.mainElement),X(this.loadingElement))}},{key:"refresh",value:function(){2===this.currentMode&&this.loadArticle(this.currentArticleId,this.currentTeaserType)}},{key:"confirmClear",value:function(){return!(this.dataEntered&&!confirm("The data entered will be deleted if you continue. Are you sure you want to stop?"))&&(this.clearData(),!0)}},{key:"previewTitle",value:function(e,t,n,r){this.previewedItem&&e!==this.previewedItem&&this.previewedItem.classList.remove("is-previewing"),this.previewedItem=e,e&&e.classList.add("is-previewing"),this.currentTeaserType||(this.currentTeaserType=r),this.emit("request-preview-title",{relationId:this.currentArticleId,text:t,originalText:n,teaserType:this.currentTeaserType})}},{key:"restorePreviewedTitle",value:function(e){this.previewedItem&&this.previewedItem.classList.remove("is-previewing"),this.previewedItem=null,this.emit("request-restore-previewed-title",{relationId:this.currentArticleId,teaserType:this.currentTeaserType,variant:e})}},{key:"appendItem",value:function(){var e=this;if(!(this.currentItemCount>=5)){var t=V[this.currentItemCount],n="option-"+t,r=document.createElement("li");r.classList.add("tentacles-abtester-item"),r.classList.add("tentacles-abtester-item--active");var i=N++;r.setAttribute("data-variant",t),r.innerHTML='\n      <label class="tentacles-abtester-item__value-container" for="option'+i+'">\n        <textarea class="tentacles-abtester-item__value" id="option'+i+'" name="'+n+'"></textarea>\n      </label>\n      <div class="tentacles-abtester-item__controls">\n        <a data-role="abtester__delete-title" title="Delete this title">\n          '+E.g+'\n        </a>\n        <a class="tentacles-abtester-item__toggle-preview" data-role="abtester__toggle-preview" title="Preview this title">\n          '+E.h+"\n        </a>\n      </div>\n    ",this.element.querySelector('[data-role="abtester__item-list"]').appendChild(r);var a=r.querySelector("textarea");x(a),this.addEventListeners(a,r),r.querySelector('[data-role="abtester__delete-title"]').addEventListener("click",(function(){return e.removeItem(r.getAttribute("data-variant"))})),r.querySelector('[data-role="abtester__toggle-preview"]').addEventListener("click",(function(){r.classList.toggle("is-previewing");var t=r.classList.contains("is-previewing"),n=e.getValueAllTextareas(a);t?e.getArticleData().then((function(t){e.previewTitle(r,n,e.pageTitle,t.post_type)})):e.restorePreviewedTitle()}));var s=this.element.querySelectorAll("[id^=option0]").length;if(s>1)for(var o=1;o<s;o++)this.appendSubTextbox(r,i,t,o);r.querySelector("textarea").focus(),this.currentItemCount+=1,this.currentItemCount>=5&&this.element.querySelector('[data-role="abtester__item-panel"]').classList.add("is-at-max-items"),this.element.querySelector('[data-role="abtester__create-button"]').classList.remove("is-disabled")}}},{key:"appendSubItem",value:function(){for(var e=this.element.querySelector('[data-role="abtester__item-list"]'),t=[].concat($(e.children)),n=0;n<t.length;n++){var r=t[n],i=r.querySelector('[id^="option"]').getAttribute("id").substring(6),a=r.querySelectorAll('[id^="option"]').length;this.appendSubTextbox(r,i,void 0,a)}}},{key:"appendSubTextbox",value:function(e,t,n,r){var i=this;n=n||V[t],t=parseInt(t),r=parseInt(r);var a=document.createElement("div");a.classList.add("tentacles-abtester-subitem"),a.setAttribute("data-variant",n+"_"+r);var s=document.createElement("div");s.classList.add("tentacles-abtester-subitem__close");var o=document.createElement("a");o.innerHTML=""+E.l,o.addEventListener("click",(function(){return i.removeSubItem(r)})),s.appendChild(o),a.appendChild(s);var l=document.createElement("textarea");l.classList.add("tentacles-abtester-subitem__value"),l.setAttribute("placeholder","Select another part "+n+"_"+r),l.setAttribute("id","option"+t+r),l.setAttribute("name","option-"+n+"_"+r),x(l),this.addEventListeners(l,e),this.setFocusAttributeToTextarea(l),a.appendChild(l),1===r?e.querySelector('[id^="option'+t+'"]').after(a):e.querySelector('[id^="option'+t+(r-1)+'"]').parentNode.after(a)}},{key:"setFocusAttributeToTextarea",value:function(e){if(-1!==e.getAttribute("id").indexOf("option0")){for(var t=this.element.querySelector('[data-variant="a"]').querySelectorAll("textarea"),n=[].concat($(t)),r=0;r<n.length;r++){n[r].removeAttribute("focus")}e.setAttribute("focus",!0),e.focus()}}},{key:"getValueAllTextareas",value:function(e){for(var t="",n=this.element.querySelectorAll("[id^="+e.getAttribute("id").substring(0,7)+"]"),r=0;r<n.length;r++)n[r].value&&(0===r?t=n[r].value:t+="$$"+n[r].value);return t}},{key:"addEventListeners",value:function(e,t){var n=this;e.addEventListener("keyup",(function(){e.value.length>0&&t.classList.remove("has-error")})),e.addEventListener("focus",(function(r){if(n.currentArticleId){n.inputFocus=e,n.setFocusAttributeToTextarea(e);var i=n.getValueAllTextareas(e);n.getArticleData().then((function(e){n.previewTitle(t,i,n.pageTitle,e.post_type)}))}})),e.addEventListener("keyup",(function(r){if(n.currentArticleId){e.value&&(n.dataEntered=!0);var i=n.getValueAllTextareas(e);n.getArticleData().then((function(e){n.previewTitle(t,i,n.pageTitle,e.post_type)}))}}))}},{key:"splitTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.split("$$");if(r.length>1){var i='<span class="'+t+'-part">'+r[0]+"</span>";if(!n)for(var a=1;a<r.length;a++)i+='<span class="'+t+'-part">'+r[a]+"</span>";return i}return e}},{key:"appendProgressItem",value:function(e,t){var n=t?e.ctr:e.clicksPercentage,r=t?e.loyaltyClicksPercentage:e.clicksPercentage,i=document.createElement("li");i.classList.add("tentacles-abtester-progress-item"),e.won&&i.classList.add("tentacles-abtester-progress-item--is-winning"),i.innerHTML='\n      <div class="tentacles-abtester-progress-item__column-1">\n        <span class="tentacles-abtester-progress-item__share" data-role="abtester-progress-item__share">'+n+'%</span>\n      </div>\n      <div class="tentacles-abtester-progress-item__column-2">\n        <span class="tentacles-abtester-progress-item__title">'+this.splitTitle(e.title,"tentacles-abtester-progress-item__title")+'</span>\n        <div class="tentacles-abtester-progress-item__share-bar">\n          <span class="tentacles-abtester-progress-item__share-bar-title" style="margin-left: '+r+'%"></span>\n          <progress class="tentacles-abtester-progress-item__share-bar-progress" value="'+r+'" max="100"></progress>\n        </div>\n      </div>\n    ',r>=50&&i.classList.add("tentacles-abtester-progress-item--more-than-fifty"),this.element.querySelector('[data-role="abtester__progress-item-list"]').appendChild(i)}},{key:"removeItem",value:function(e){var t=V.indexOf(e);if(!(t<1||t>=this.currentItemCount)){this.currentItemCount-=1;var n=this.element.querySelector('[data-role="abtester__item-list"]'),r=n.children[t];r===this.previewedItem&&this.restorePreviewedTitle(),n.removeChild(r);var i=t,a=!0,s=!1,o=void 0;try{for(var l,c=[].concat($(n.children)).splice(t)[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.setAttribute("data-variant",V[i]),u.querySelector("textarea").setAttribute("name","option-"+V[i]),i+=1}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}this.currentItemCount<5&&this.element.querySelector('[data-role="abtester__item-panel"]').classList.remove("is-at-max-items"),this.currentItemCount<2&&this.element.querySelector('[data-role="abtester__create-button"]').classList.add("is-disabled")}}},{key:"removeSubItem",value:function(e){var t=this.element.querySelector('[data-role="abtester__item-list"]');this.restorePreviewedTitle(e);for(var n=[].concat($(t.children)),r=0;r<n.length;r++){var i=n[r],a=i.querySelector('[id^="option"]'),s=Number.parseInt(a.getAttribute("id").substring(6)),o=i.querySelector('[data-variant="'+V[s]+"_"+e+'"]');0===s&&o.querySelector("textarea").value&&this.removeTitleFromPageTitle(o.querySelector("textarea").value),o.parentNode.removeChild(o)}for(var l=[].concat($(t.children)),c=0;c<l.length;c++)for(var u=l[c],d=(s=(a=u.querySelector('[id^="option"]')).getAttribute("id").substring(6),1),h=[].concat($(u.querySelectorAll("[data-variant]"))),f=0;f<h.length;f++){var v=h[f];v.setAttribute("data-variant",V[s]+"_"+d),v.querySelector("textarea").setAttribute("name","option-"+V[s]+"_"+d),v.querySelector("textarea").setAttribute("id","option"+s+d),v.querySelector("textarea").setAttribute("placeholder","Select another part "+V[s]+"_"+d),d+=1}}},{key:"removeTitleFromPageTitle",value:function(e){this.pageTitle.indexOf(e)>-1&&(this.pageTitle=this.pageTitle.replace("$$"+e,""))}},{key:"loadArticle",value:function(e,t){var n=this;if(this.confirmClear())return this.isInitialized||this.initialize(),this.setMode(3),this.currentArticleId=e,this.currentTeaserType=t,this.clearData(),new Promise((function(t,r){var i,a;(i=Object(g.a)(),a=Object(b.b)(e),Object(w.a)(i),Object(w.c)(a),s("GET","/brands/"+i+"/headertests/"+a+"/")).then((function(e){e.hasOwnProperty("reason")&&"custom_stop"===e.reason&&(e.status="canceled");var r="active"===e.status||"completed"===e.status;n.headertestData=e,n.currentTeaserType=e.type,r?n.setMode(2):n.setMode(1),t()}))}))}},{key:"_initializeCreateMode",value:function(){var e=this;this.setHeadertestMetadata(),J(this.activeElement),X(this.createElement),this.currentItemCount=1,this.getArticleData().then((function(t){window.parent.postMessage({type:"tentacles:addTitle"},"*"),e.setEmptyTextArea(t.title),e.setArticleDate()}))}},{key:"_initializeWatchMode",value:function(){this.setHeadertestMetadata(),J(this.createElement),X(this.activeElement);var e=this.headertestData.testData,t=this.headertestData.ABuseThompson;this.setOriginalTitle(this.headertestData.title);var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;this.appendProgressItem(o,t)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}},{key:"getArticleData",value:function(){var e=this;if(this.currentArticleId)return new Promise((function(t,n){var r,i;e.articleData?t(e.articleData):(r=Object(g.a)(),i=e.currentArticleId,Object(w.a)(r),Object(w.c)(i),/^v/.test(i)?s("get","/brands/"+r+"/stories/"+i,{primaryPost:"true",primaryStoryType:"videos"}):s("get","/brands/"+r+"/stories/"+i,{primaryPost:"true"})).then((function(n){e.articleData=n,e.currentTeaserType=n.postType,t(e.articleData)}))}))}},{key:"clearOriginalTitle",value:function(){var e=this;this.originalTitle="",this.setPageTitle(""),[].concat($(this.element.querySelectorAll('[data-role="ab-test-original-title"]'))).forEach((function(t){"H3"===t.tagName?t.innerText="":(t.value="",x(t)),e.addEventListeners(t,t.closest("li"))}))}},{key:"setOriginalTitle",value:function(e){var t=this;this.originalTitle=e,this.setPageTitle(e),[].concat($(this.element.querySelectorAll('[data-role="ab-test-original-title"]'))).forEach((function(n){if("H3"===n.tagName)n.innerHTML=t.splitTitle(e,"tentacles-abtester__article-title",!0);else{var r=document.querySelector(".tentacles-abtester-tooltip");r.classList.contains("tentacles-visible")&&r.classList.remove("tentacles-visible"),n.value=e,x(n)}t.addEventListeners(n,n.closest("li"))}))}},{key:"setPageTitle",value:function(e){this.pageTitle&&-1===this.pageTitle.indexOf(e)?this.pageTitle+="$$"+e:this.pageTitle=e}},{key:"setArticleDate",value:function(){var e=this;this.getArticleData().then((function(){e.articleData.display_date&&[].concat($(e.element.querySelectorAll('[data-role="ab-test-article-date"]'))).forEach((function(t){var n,r,i;t.innerText=(n=new Date(e.articleData.display_date),r={capfirst:!0,format:"date"},i=U()(n,G[r.format||"date"],{locale:Y.en}),r.capfirst&&(i=i.substring(0,1).toUpperCase()+i.substring(1)),i)}))}))}},{key:"setEmptyTextArea",value:function(e){var t=this;this.originalTitle=e,[].concat($(this.element.querySelectorAll('[data-role="ab-test-original-title"]'))).forEach((function(n){"H3"===n.tagName?n.innerText=e.replace("$$"," "):(document.querySelector(".tentacles-abtester-tooltip").classList.add("tentacles-visible"),x(n)),t.addEventListeners(n,n.closest("li"))}))}},{key:"setHeadertestMetadata",value:function(){var e=this,t=Z.default;this.headertestData.status in Z&&(t=Z[this.headertestData.status]),this.headertestData&&([].concat($(this.element.querySelectorAll('[data-role="abtester__status"]'))).forEach((function(e){e.innerText=t})),[].concat($(this.element.querySelectorAll('[data-role="abtester__time-elapsed"]'))).forEach((function(t){if(e.headertestData.creationDate){X(t);var n=new Date(e.headertestData.finishDate||new Date),r=Math.floor((n-new Date(e.headertestData.creationDate))/6e4);t.innerText="Time elapsed: "+r+" minutes"}else J(t)})),[].concat($(this.element.querySelectorAll('[data-role="abtester__cancel-button"]'))).forEach((function(t){"active"===e.headertestData.status?X(t):J(t)})),[].concat($(this.element.querySelectorAll('[data-role="abtester__redo-button"]'))).forEach((function(t){"completed"===e.headertestData.status?X(t):J(t)})),[].concat($(this.element.querySelectorAll('[data-role="abtester__author"]'))).forEach((function(n){e.headertestData.createdBy&&"preparing"!==t?(X(n),n.innerText="Author: "+e.headertestData.createdBy.name):J(n)})),[].concat($(this.element.querySelectorAll('[data-role="abtester__clicks"]'))).forEach((function(t){e.headertestData.creationDate&&e.headertestData.totalClicks?(X(t),t.innerText="Total clicks: "+e.headertestData.totalClicks):J(t)})))}},{key:"clearData",value:function(){for(this.isInitialized||this.initialize();this.currentItemCount>1;)this.removeItem(V[1]);var e=this.element.querySelectorAll("[id^=option0]").length;if(e>1)for(var t=1;t<e;t++)this.removeSubItem(t);this.clearOriginalTitle(),N=1,this.element.querySelector('[data-role="abtester__create-button"]').classList.add("is-disabled"),this.element.querySelector('[data-role="abtester__progress-item-list"]').innerHTML="",this.dataEntered=!1,this.articleData=null,this.headertestData=null}},{key:"show",value:function(){this.isVisible||(this.element.classList.add("is-visible"),this.isVisible=!0)}},{key:"hide",value:function(){if(this.isVisible){if(!this.confirmClear())return;this.currentMode=0,this.element.classList.remove("is-visible"),this.currentArticleId&&window.parent.postMessage({type:"tentacles:restoreTitle",relationId:Object(b.b)(this.currentArticleId),teaserType:this.currentTeaserType},"*"),this.isVisible=!1}}},{key:"checkTitleMatch",value:function(e,t){var n=(new DOMParser).parseFromString(this.activeElementHtml,"text/html").querySelector("a");if(0===n.children.length||1===n.children.length&&"BR"===n.children[0].tagName){if(this.stripSpecialCharacters(n.innerText)===this.stripSpecialCharacters(t))return!0}else for(var r=["h1","h2","h3","h4","h5","h6","p","span","strong","cite","div"],i=0;i<r.length;i++)for(var a=r[i],s=n.querySelectorAll(a),o=0;o<s.length;o++){var l=s[o];if(this.stripSpecialCharacters(l.innerText)===this.stripSpecialCharacters(t))return!0}return!1}},{key:"stripSpecialCharacters",value:function(e){return e.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g," ").trim()}},{key:"addTitle",value:function(e,t){if(this.checkTitleMatch(e,t)){var n=document.querySelector('[focus="true"]');n.disabled=!1,document.querySelector(".tentacles-abtester-tooltip").classList.remove("tentacles-visible"),n.value=t;var r=document.querySelector('[data-role="abtester__add-item"]');r.classList.add("is-visible"),x(n),this.setPageTitle(t),1===document.querySelectorAll(".tentacles-abtester-item").length&&r.click()}}}]),t}(T.a);var Q=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.getElementById("tentacles-desk");var n=document.getElementById("login"),r=document.getElementById("articles"),i=document.getElementById("abtester");this.loginPanel=new y(n),this.articlesPanel=new R(r),this.abtesterPanel=new K(i),h("IS_LOGGED_IN",(function(e){e?t.setFocus("overview"):t.setFocus("login")})),this.articlesPanel.addEventListener("enterABTest",(function(e){t.abtesterPanel.loadArticle(e.detail.articleId),t.setFocus("headertest")})),this.articlesPanel.addEventListener("articles:articles-refreshed",(function(e){window.parent.postMessage({type:"tentacles:articles",articles:e.detail.articles},"*")})),this.articlesPanel.addEventListener("show-ranking-status",(function(e){window.parent.postMessage({type:"tentacles:showRankingStatus",show:e.detail.status},"*")})),this.abtesterPanel.on("close",(function(){t.articlesPanel.selectArticle(t.abtesterPanel.currentArticleId),t.setFocus("overview")})),this.abtesterPanel.on("data-change",(function(e){t.articlesPanel.refresh()})),this.abtesterPanel.on("request-preview-title",(function(e){window.parent.postMessage({type:"tentacles:modifyTitle",relationId:Object(b.b)(e.relationId),newTitle:e.text,oldTitle:e.originalText,teaserType:e.teaserType},"*")})),this.abtesterPanel.on("request-restore-previewed-title",(function(e){window.parent.postMessage({type:"tentacles:restoreTitle",relationId:Object(b.b)(e.relationId),teaserType:e.teaserType,variant:e.variant},"*")})),this.loginPanel.addEventListener("loginSuccessful",(function(){t.setFocus("overview")})),window.addEventListener("message",(function(e){if("openDesk"===e.data.type&&t.setFocus(t.currentFocus),"refreshArticleList"===e.data.type&&(f("PATHNAME",e.data.path),t.articlesPanel.refresh(),t.abtesterPanel.refresh(),t.mainLoop()),"getPageUrls"===e.data.type&&t.articlesPanel.setPageUrls(e.data.pageUrls,e.data.currentLocation),e.data.type,"setInitialData"===e.data.type){f("PATHNAME",e.data.path);var n=!0,r=!1,i=void 0;try{for(var a,l=Object.entries(e.data)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,u=Q(c,2),d=u[0],h=u[1];"brand"===d.substring(0,5)&&o.f(h)}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}o.g(e.data.mystoriesfilter),t.articlesPanel.initMyStoriesFilterState(),o.h(e.data.showranking),t.articlesPanel.initShowRankingState(),o.e(e.data.activefilter),t.articlesPanel.selectFilter(o.a()),t.articlesPanel.initializeFilters()}var p,m,y;"startHeaderTest"===e.data.type&&(t.abtesterPanel.activeElementHtml=e.data.element,t.abtesterPanel.loadArticle(e.data.relationId),t.setFocus("headertest")),"addTitle"===e.data.type&&t.abtesterPanel.addTitle(e.data.postId,e.data.title),"selectArticle"===e.data.type&&(t.articlesPanel.selectArticle(Object(b.c)(e.data.teaserPosition).relationId,!1),t.setFocus("overview")),"getArticleData"===e.data.type&&(!function(e){if(e.action){var t=e.action;t.iconClasses=[],t.name&&t.name in M.a&&t.iconClasses.push(M.a[t.name]),t.priority&&t.priority in M.e&&t.iconClasses.push(M.e[t.priority]),e.color&&t.iconClasses.push(e.color)}}(e.data),window.parent.postMessage({type:"tentacles:processArticleData",relationId:Object(b.c)(e.data.teaserPosition).relationId,teaserPosition:e.data.teaserPosition,data:e.data},"*")),"getArticleClickCvi"===e.data.type&&(p=Object(g.a)(),m=Object(b.b)(e.data.relationId),y=v("PATHNAME"),Object(w.a)(p),Object(w.c)(m),s("GET","/brands/"+p+"/stories/"+m+"/clickCvi",{path:y||"/"})).then((function(t){window.parent.postMessage({type:"tentacles:processClickCvi",relationId:Object(b.b)(e.data.relationId),data:t},"*")}))})),window.addEventListener("message",this.onPaperPosts.bind(this)),window.parent.postMessage({type:"tentacles:getAuthCookie"},"*"),window.parent.postMessage({type:"tentacles:getInitialData"},"*"),window.parent.postMessage({type:"tentacles:setMenuBrand"},"*"),this.mainLoop()}return ee(e,[{key:"mainLoop",value:function(){var e=this;setTimeout((function(){v("IS_LOGGED_IN")&&(e.articlesPanel.refresh(),e.abtesterPanel.refresh()),e.mainLoop()}),6e4)}},{key:"setFocus",value:function(e){this.currentFocus=e,"login"===e&&(this.abtesterPanel.hide(),this.articlesPanel.hide(),this.loginPanel.show(),Object(p.a)("focus:login")),"overview"===e&&(this.abtesterPanel.hide(),this.articlesPanel.show(),this.loginPanel.hide(),Object(p.a)("focus:overview")),"headertest"===e&&(this.abtesterPanel.show(),this.articlesPanel.show(),this.loginPanel.hide(),Object(p.a)("focus:headertest"))}},{key:"onPaperPosts",value:function(e){var t=this;if("paper:authCookie"===e.data.type){var n=e.data.token,r=e.data.doNotTrackUserId;window.parent.postMessage({type:"tentacles:getLocalSettings"},"*"),void 0===n?f("IS_LOGGED_IN",!1):function(e){return window.token=e,new Promise((function(e,t){s("GET","/user",{}).then((function(t){t.user_token?e(t):e(!1)})).catch((function(t){e(!1)}))}))}(n).then((function(e){e?(e.admin||function(e,t){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date);var r={anonymize_ip:!0};t||(r.user_id=e),n("config","WEBPACK__ANALYTICS_ID",r)}(n,r),f("IS_LOGGED_IN",!0),f("USERNAME",e.name),f("AVATAR",e.imageUrl)):f("IS_LOGGED_IN",!1)})).catch((function(e){t.loginPanel.hide()}))}else"paper:setMenuBrand"===e.data.type&&this.articlesPanel.menu.reInit(Object(g.a)())}}],[{key:"initialize",value:function(){e.getInstance()}},{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e})().initialize()},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={API_URL:"https://api.smartocto.com/api",BASE_URL:"https://tentacles.smartocto.com/ten",SMARTOCTO_URL:"https://[brandId].smartocto.com",DEBUG:!1,CURRENT_TIME:"1686141062499",TENTACLES_ENABLED_VARIABLE:"tentaclesEnabled"};function i(e){return r[e]}}});
//# sourceMappingURL=index.js.map